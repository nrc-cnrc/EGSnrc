<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>EGSnrc C++ class library: Example geometries</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<script language="JavaScript" type="text/javascript">
    $(document).ready(function(){
    var imgArr = new Array( // relative paths of images
    'linac2.png',
    'egs_isotropic_source.png',
    'egs_conestack.png',
    'car.png',
    'egs_cd_geometry.png',
    'chamber.png',
    'c_in_box.png',
    'egs_collimated_source.png',
    'egs_iplanes.png',
    'egs_point_source.png',
    'linac_s1.png',
    'egs_ndgeometry.png',
    'egs_roundrect_cylinders.png',
    'egs_source_collection.png',
    'egs_xyzrepeater.png',
    'cones.png',
    'egs_prism.png',
    'egs_pyramid.png',
    'I6702.png',
    'egs_xyzgeometry.png',
    'linac1.png'
    );
    var preloadArr = new Array();
    var i;
    /* preload images */
    for(i=0; i < imgArr.length; i++){
    preloadArr[i] = new Image();
    preloadArr[i].src = imgArr[i];
    }
    changeImg();
    var intID = setInterval(changeImg, 5000);
    /* image rotator */
    function changeImg(){
    $('#egsImageScroller').css('background','#000000 url(' + preloadArr[Math.floor(Math.random() * imgArr.length)].src +') center/contain no-repeat');
    }
    });
</script>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="egsImageScroller"></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EGSnrc C++ class library
   &#160;<span id="projectnumber">Report PIRS-898 (2021)</span>
   </div>
   <div id="projectbrief">Iwan Kawrakow, Ernesto Mainegra-Hing, Frederic Tessier, Reid Townson and Blake Walters</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Coding&#160;Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Example geometries </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This page describes the example geometry files included in the distribution and found in <code>$HEN_HOUSE/egs++/geometry/examples</code>.</p>
<p><a class="el" href="example_geometries.html#hemisphere_geom">A hemisphere</a> <br/>
 <a class="el" href="example_geometries.html#pyramid_geom">A pyramid</a> <br/>
 <a class="el" href="example_geometries.html#rz_geom">An RZ-geometry</a> <br/>
 <a class="el" href="example_geometries.html#rz1_geom">Alternative RZ-geometry definitions</a> <br/>
 <a class="el" href="example_geometries.html#cones_geom">A geometry using a set of cones</a> <br/>
 <a class="el" href="example_geometries.html#rz_phi_geom">A cylinder divided into segments</a> <br/>
 <a class="el" href="example_geometries.html#xyz_geom">A XYZ-geometry</a> <br/>
 <a class="el" href="example_geometries.html#mushroom_geom">A mushroom geometry</a> <br/>
 <a class="el" href="example_geometries.html#I6702_inp">A brachytherapy seed</a> <br/>
 <a class="el" href="example_geometries.html#rounded_ionchamber_geom">An ion chamber with rounded ends</a> <br/>
 <a class="el" href="example_geometries.html#chambers_in_box_geom">Ion chambers in a box</a> <br/>
 <a class="el" href="example_geometries.html#seeds_in_xyz_geom">Brachytherapy seeds in a XYZ geometry</a> <br/>
 <a class="el" href="example_geometries.html#seeds_in_xyz1_geom">Better implementation of seeds in a XYZ geometry</a> <br/>
 <a class="el" href="example_geometries.html#car_geom">A car geometry</a> <br/>
 <a class="el" href="example_geometries.html#linac_geom">A linear accelerator geometry</a> <br/>
</p>
<h1><a class="anchor" id="hemisphere_geom"></a>
A hemisphere</h1>
<p>file: <code>hemisphere.geom</code><br/>
<br/>
  This example geometry file describes a hemisphere from a <a class="el" href="classEGS__cSpheres.html">set of spheres</a> and a <a class="el" href="classEGS__PlanesT.html">set of planes</a> using an <a class="el" href="classEGS__NDGeometry.html">N-dimensional geometry</a>. We start by defining the set of spheres to contain a single sphere with a radius of 1 with midpoint at the origin: <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library = egs_spheres</div>
<div class="line">        name    = sphere</div>
<div class="line">        midpoint = 0 0 0</div>
<div class="line">        radii = 1</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> We then define a set of planes consisting of a single plane with a normal at 45 degrees with the 3 axis passing through the origin and defining a single region (the region to which the plane normal points to): <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library  = egs_planes</div>
<div class="line">        type     = <a class="code" href="classEGS__PlanesT.html">EGS_Planes</a></div>
<div class="line">        name     = planes</div>
<div class="line">        normal   = 1 1 1</div>
<div class="line">        positions = 0        # a second plane at infinity will <span class="keyword">get</span> defined</div>
<div class="line"><span class="preprocessor">                             # internally, if we input a single position</span></div>
<div class="line"><span class="preprocessor">    :stop geometry:</span></div>
</div><!-- fragment --> Now we can put the two geometry objects together using an N-dimensional geometry to form the hemisphere <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library = egs_ndgeometry</div>
<div class="line">        name    = hemisphere</div>
<div class="line">        dimensions = planes sphere</div>
</div><!-- fragment --> and fill the hemisphere with water. <div class="fragment"><div class="line">        :start media input:</div>
<div class="line">            media = H2O700ICRU</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --></p>
<p>Here is a view of this geometry </p>
<div class="image">
<img src="hemisphere.png" alt="hemisphere.png"/>
</div>
<p> and this is the complete geometry definition: </p>
<div class="fragment"><div class="line"></div>
<div class="line"><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc egs++ sample hemisphere geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Copyright (C) 2015 National Research Council Canada</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  This file is part of EGSnrc.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc is free software: you can redistribute it and/or modify it under</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  the terms of the GNU Affero General Public License as published by the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Free Software Foundation, either version 3 of the License, or (at your</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  option) any later version.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc is distributed in the hope that it will be useful, but WITHOUT ANY</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License for</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  more details.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  You should have received a copy of the GNU Affero General Public License</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  along with EGSnrc. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Author:          Iwan Kawrakow, 2005</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Contributors:</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  An example geometry input file for the egs++ geometry package.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  This input file defines a hemisphere as a geometry for egs++. It uses a 2D</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  geometry to make the hemisphere out of a set of spheres and planes.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"></div>
<div class="line">:start geometry definition:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #################################### the spheres</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #      Note: we don&#39;t define any media here because the geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #      will get filled with media in the ND-geometry definition</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_spheres</div>
<div class="line">        name    = sphere</div>
<div class="line">        midpoint = 0 0 0</div>
<div class="line">        radii = 1</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #################################### the planes</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #      Note: we don&#39;t define any media here because the geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #      will get filled with media in the ND-geometry definition</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library  = egs_planes</div>
<div class="line">        type     = <a class="code" href="classEGS__PlanesT.html">EGS_Planes</a></div>
<div class="line">        name     = planes</div>
<div class="line">        normal   = 1 1 1</div>
<div class="line">        positions = 0        # a second plane at infinity will <span class="keyword">get</span> defined</div>
<div class="line"><span class="preprocessor">                             # internally, if we input a single position</span></div>
<div class="line"><span class="preprocessor"></span>    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ################################### the hemisphere</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_ndgeometry</div>
<div class="line">        name    = hemisphere</div>
<div class="line">        dimensions = planes sphere</div>
<div class="line">        :start media input:</div>
<div class="line">            media = H2O700ICRU</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line">    simulation geometry = hemisphere</div>
<div class="line"></div>
<div class="line">:stop geometry definition:</div>
</div><!-- fragment --><h1><a class="anchor" id="pyramid_geom"></a>
A pyramid</h1>
<p>file: <code>pyramid.geom</code><br/>
<br/>
  This example defines a <a class="el" href="classEGS__PyramidT.html">pyramid </a> with an irregular base that is truncated at the two ends with a <a class="el" href="classEGS__PlanesT.html">set of planes </a> within an <a class="el" href="classEGS__NDGeometry.html">N-dimensional geometry</a>. We start by defining the set of planes <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library = egs_planes</div>
<div class="line">        type    = EGS_Zplanes</div>
<div class="line">        positions = -4 4</div>
<div class="line">        name    = planes</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> We then construct a pyramid with its base in the z-plane at z=0: <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library = egs_pyramid</div>
<div class="line">        type    = <a class="code" href="classEGS__PyramidT.html">EGS_PyramidZ</a></div>
<div class="line">        name    = pyramid</div>
<div class="line">        points  = -2,-2.05  -1,-1.05, -2,2.05   2,2.05  2,0.05  \</div>
<div class="line">                  1,0  1,-2.05 -2,-2.05</div>
<div class="line">        tip     = 0 0 8</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> Because this is a z-pyramid, the input to the <code>points</code> key is interpreted as a list of 2D positions in the z=0 xy-plane. Note also the line continuation using the \ character. Now we can put the two geometry objects together using an N-dimensional geometry to form the truncated pyramid and fill the resulting single region with aluminum: <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library = egs_ndgeometry</div>
<div class="line">        name    = cut_pyramid</div>
<div class="line">        hownear method = 1</div>
<div class="line">        dimensions = planes pyramid</div>
<div class="line">        :start media input:</div>
<div class="line">            media = AL521ICRU</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --></p>
<p>Here is a view of this geometry </p>
<div class="image">
<img src="pyramid.png" alt="pyramid.png"/>
</div>
<p> and this is the complete geometry definition: </p>
<div class="fragment"><div class="line"></div>
<div class="line"><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc egs++ sample pyramid geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Copyright (C) 2015 National Research Council Canada</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  This file is part of EGSnrc.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc is free software: you can redistribute it and/or modify it under</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  the terms of the GNU Affero General Public License as published by the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Free Software Foundation, either version 3 of the License, or (at your</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  option) any later version.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc is distributed in the hope that it will be useful, but WITHOUT ANY</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License for</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  more details.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  You should have received a copy of the GNU Affero General Public License</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  along with EGSnrc. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Author:          Iwan Kawrakow, 2005</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Contributors:</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  This input file defines a cut pyramid as a geometry for egs++.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  It uses a 2D geometry to make the cut a pyramid out of a pyramid and a set</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  of planes.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"></div>
<div class="line">:start geometry definition:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ################################# the planes</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_planes</div>
<div class="line">        type    = EGS_Zplanes</div>
<div class="line">        positions = -4 4</div>
<div class="line">        name    = planes</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ################################ the pyramid</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_pyramid</div>
<div class="line">        type    = <a class="code" href="classEGS__PyramidT.html">EGS_PyramidZ</a></div>
<div class="line">        name    = pyramid</div>
<div class="line">        points  = -2,-2.05  -1,-1.05, -2,2.05   2,2.05  2,0.05  \</div>
<div class="line">                  1,0  1,-2.05 -2,-2.05</div>
<div class="line">        #points  = -2,-2.05  -2,2.05   2,2.05  2,-2.05</div>
<div class="line">        tip     = 0 0 8</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ################################ the final geometry</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_ndgeometry</div>
<div class="line">        name    = cut_pyramid</div>
<div class="line">        hownear method = 1</div>
<div class="line">        dimensions = planes pyramid</div>
<div class="line">        :start media input:</div>
<div class="line">            media = AL521ICRU</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line">    simulation geometry = cut_pyramid</div>
<div class="line"></div>
<div class="line">:stop geometry definition:</div>
</div><!-- fragment --><h1><a class="anchor" id="rz_geom"></a>
An RZ-geometry</h1>
<p>file: <code>rz.geom</code><br/>
<br/>
 <p>This example geometry file defines an RZ-geometry using an <a class="el" href="classEGS__NDGeometry.html">N-dimensional geometry</a> made of a <a class="el" href="classEGS__CylindersT.html">set of cylinders</a> and a <a class="el" href="classEGS__PlanesT.html">set of planes</a>. The geometry defined is the same as in the <code>cavrznrc_template.egsinp</code> file for the CAVRZnrc application (a simple pancake ionization chamber with graphite walls and air cavity).</p>
<p>We start by defining the 2 dimensions of the geometry: first s set of 4 parallel z-planes that define 3 regions <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library   = egs_planes</div>
<div class="line">        type      = EGS_Zplanes</div>
<div class="line">        name      = the_planes</div>
<div class="line">        positions = 0  0.3  0.5  0.8</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> and then a set of 2 concentric z-cylinders that defines 2 regions <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library   = egs_cylinders</div>
<div class="line">        type      = EGS_ZCylinders</div>
<div class="line">        name      = the_cylinders</div>
<div class="line">        radii     = 1 1.3</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> The N-dimensional geometry formed from these two geometries will have 3x2=6 regions with the 3 regions that are within the inner cylinder having indeces 0,1 and 2 and the other 3 regions between the inner and outer cylinders having indeces 3,4,5 (see the <a class="el" href="classEGS__NDGeometry.html" title="A class modeling a N-dimensional geometry. ">EGS_NDGeometry</a> documentation for details on regions and region indexing). We therefore use the following <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library   = egs_ndgeometry</div>
<div class="line">        name      = rz</div>
<div class="line">        dimensions= the_planes the_cylinders</div>
<div class="line">        :start media input:</div>
<div class="line">            media = 170C521ICRU AIR521ICRU</div>
<div class="line">            set medium = 1 1</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> to form the N-dimensional geometry and fill the cavity with air.</p>
<p>For the view of this geometry </p>
<div class="image">
<img src="rz1.png" alt="rz1.png"/>
</div>
<p> the walls were made siemi-transparent in the <a class="el" href="group__Geometry.html#geometry_view">geometry viewer</a>.<br/>
 Here is the complete geometry definition: </p>
<div class="fragment"><div class="line"></div>
<div class="line"><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc egs++ sample nd geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Copyright (C) 2015 National Research Council Canada</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  This file is part of EGSnrc.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc is free software: you can redistribute it and/or modify it under</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  the terms of the GNU Affero General Public License as published by the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Free Software Foundation, either version 3 of the License, or (at your</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  option) any later version.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc is distributed in the hope that it will be useful, but WITHOUT ANY</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License for</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  more details.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  You should have received a copy of the GNU Affero General Public License</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  along with EGSnrc. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Author:          Iwan Kawrakow, 2005</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Contributors:</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  An example geometry input file for the egs++ geometry package.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  This input file defines an egs++ geometry for a RZ geometry modeled</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  with a N-dimensional geometry. The input file reproduces the geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  defined in the cavrznrc_template.egsinp file in the EGSnrc distribution.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"></div>
<div class="line">:start geometry definition:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ################################### The planes</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library   = egs_planes</div>
<div class="line">        type      = EGS_Zplanes</div>
<div class="line">        name      = the_planes</div>
<div class="line">        positions = 0  0.3  0.5  0.8</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ################################### The cylinders</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library   = egs_cylinders</div>
<div class="line">        type      = EGS_ZCylinders</div>
<div class="line">        name      = the_cylinders</div>
<div class="line">        radii     = 1 1.3</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ################################### The simulation geometry built from the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                   planes and cylinders as a 2D geometry</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library   = egs_ndgeometry</div>
<div class="line">        name      = rz</div>
<div class="line">        dimensions= the_planes the_cylinders</div>
<div class="line">        :start media input:</div>
<div class="line">            media = 170C521ICRU AIR521ICRU</div>
<div class="line">            set medium = 1 1</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line">    simulation geometry = rz</div>
<div class="line"></div>
<div class="line">:stop geometry definition:</div>
<div class="line"></div>
</div><!-- fragment --><h1><a class="anchor" id="rz1_geom"></a>
Alternative RZ-geometry definitions</h1>
<p>file: <code>rz1.geom</code><br/>
<br/>
 <p>This example geometry file defines the same geometry as in the <a class="el" href="example_geometries.html#rz_geom">previous example</a> but using an <a class="el" href="classEGS__EnvelopeGeometry.html">envelope geometry</a> to inscribe a smaller cylinder into a larger one, where both cylinders are made using <a class="el" href="classEGS__ConeStack.html" title="A cone stack. ">EGS_ConeStack</a> objects: <div class="fragment"><div class="line"><span class="preprocessor">    ################################### The outer cylinder</span></div>
<div class="line">    :start geometry:</div>
<div class="line">        library   = egs_cones</div>
<div class="line">        type      = <a class="code" href="classEGS__ConeStack.html">EGS_ConeStack</a></div>
<div class="line">        name      = outer_cylinder</div>
<div class="line">        axis      = 0 0 0   0 0 1</div>
<div class="line">        :start layer:</div>
<div class="line">            thickness    = 0.8</div>
<div class="line">            top radii    = 1.3</div>
<div class="line">            bottom radii = 1.3</div>
<div class="line">            media        = 170C521ICRU</div>
<div class="line">        :stop layer:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ################################### The inner cylinder</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library   = egs_cones</div>
<div class="line">        type      = <a class="code" href="classEGS__ConeStack.html">EGS_ConeStack</a></div>
<div class="line">        name      = inner_cylinder</div>
<div class="line">        axis      = 0 0 0.3   0 0 1</div>
<div class="line">        :start layer:</div>
<div class="line">            thickness    = 0.2</div>
<div class="line">            top radii    = 1</div>
<div class="line">            bottom radii = 1</div>
<div class="line">            media        = AIR521ICRU</div>
<div class="line">        :stop layer:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ################################### The simulation geometry</span></div>
<div class="line">    :start geometry:</div>
<div class="line">        library   = egs_genvelope</div>
<div class="line">        name      = rz1</div>
<div class="line">        base geometry = outer_cylinder</div>
<div class="line">        inscribed geometries = inner_cylinder</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --></p>
<p>Yet another possibility to define this geometry would be to define the inner and outer cylinders using <a class="el" href="classEGS__NDGeometry.html">N-dimensional geometries</a> instead of <a class="el" href="classEGS__ConeStack.html" title="A cone stack. ">EGS_ConeStack</a> objects and then still use an envelope to inscribe the inner cylinder into the outer cylinder, <em>e.g</em>. </p>
<pre class="fragment">########################## Define the inner cylinder
:start geometry:
    library = egs_planes
    type    = EGS_Zplanes
    name    = planes1
    positions = 0.3 0.5
:stop geometry:
:start geometry:
    library = egs_cylinders
    type    = EGS_ZCylinders
    name    = cyl1
    radii   = 1
:stop geometry:
:start geometry:
    library = egs_ndgeometry
    name    = inner_cylinder
    dimensions = planes1 cyl1
    :start media input:
        media = AIR521ICRU
    :stop media input:
:stop geometry:
########################## Define the outer cylinder
:start geometry:
    library = egs_planes
    type    = EGS_Zplanes
    name    = planes2
    positions = 0 0.8
:stop geometry:
:start geometry:
    library = egs_cylinders
    type    = EGS_ZCylinders
    name    = cyl2
    radii   = 1.3
:stop geometry:
:start geometry:
    library = egs_ndgeometry
    name    = outer_cylinder
    dimensions = planes2 cyl2
    :start media input:
        media = 170C521ICRU
    :stop media input:
:stop geometry:
############################ The chamber geometry
:start geometry:
    library   = egs_genvelope
    name      = rz1a
    base geometry = outer_cylinder
    inscribed geometries = inner_cylinder
:stop geometry:
</pre><p> This definition requires more typing but it turns out that it provides the fastest simulation with EGSnrc. This is due to the fact that it has the fewest boundaries around which charged particles go into single scattering mode and also the range-rejection (or Russian Roulette) of particles that can not reach the cavity is more efficient. The user is encouraged to study the implementation details of the <a class="el" href="classEGS__BaseGeometry.html#a111e6d8ea34e403bebaf3621223950d9">hownear()</a> methods of the various geometries involved to understand why the last definition results in the best simulation speed.</p>
<h1><a class="anchor" id="cones_geom"></a>
A geometry using a set of cones</h1>
<p>file: <code>cones.geom</code><br/>
 <p>This example geometry file demonstrates the use of an <a class="el" href="classEGS__ConeSet.html" title="A set of cones with different opening angles but the same axis and apexes. ">EGS_ConeSet</a> object. Because a set of cones is unlimited and therefore not very well suited for viewing, we use an N-dimensional geometry with a sphere forming the second dimension to limit the extent of the geometry. We start by defining a set of 6 cones with the same apex and opening angles between 10 and 60 degrees <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library = egs_cones</div>
<div class="line">        type = <a class="code" href="classEGS__ConeSet.html">EGS_ConeSet</a></div>
<div class="line">        name = cone_set</div>
<div class="line">        apex = 0 0 0</div>
<div class="line">        axis = 0 0 1</div>
<div class="line">        opening angles = 10 20 30 40 50 60</div>
<div class="line">        flag = 1         # you can also set <span class="keyword">this</span> to 0 or 2</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> For the sake of brevity we skip the definition of the sphere (see previous examples) and only show the definition of the N-dimensional geometry <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library = egs_ndgeometry</div>
<div class="line">        name = cones</div>
<div class="line">        dimensions = sphere cone_set</div>
<div class="line">        hownear method = 1</div>
<div class="line">        :start media input:</div>
<div class="line">            media = med1 med2 med3 med4 med5 med6</div>
<div class="line">            set medium = 0 0</div>
<div class="line">            set medium = 1 1</div>
<div class="line">            set medium = 2 2</div>
<div class="line">            set medium = 3 3</div>
<div class="line">            set medium = 4 4</div>
<div class="line">            set medium = 5 5</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> We repeatedly use the <code>set medium</code> key to fill each region of the cones below the apex with a different medium.</p>
<p>The geometry as defined above looks like this: </p>
<div class="image">
<img src="cones1.png" alt="cones1.png"/>
</div>
<p> If we would set the <code>flag</code> value to 0 in the definition of the cones, the geometry would look like this </p>
<div class="image">
<img src="cones2.png" alt="cones2.png"/>
</div>
<p> and for <code>flag=2</code> like this </p>
<div class="image">
<img src="cones3.png" alt="cones3.png"/>
</div>
<p> (the red medium was made semi-transparent to be able to see the cones).</p>
<p>Here is the complete geometry file: </p>
<div class="fragment"><div class="line"></div>
<div class="line"><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc egs++ sample cone set geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Copyright (C) 2015 National Research Council Canada</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  This file is part of EGSnrc.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc is free software: you can redistribute it and/or modify it under</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  the terms of the GNU Affero General Public License as published by the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Free Software Foundation, either version 3 of the License, or (at your</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  option) any later version.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc is distributed in the hope that it will be useful, but WITHOUT ANY</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License for</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  more details.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  You should have received a copy of the GNU Affero General Public License</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  along with EGSnrc. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Author:          Iwan Kawrakow, 2005</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Contributors:</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#   An example geometry input file for the egs++ geometry package.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#   This input file demonstrates the use of a cone set. Play around with the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#   flag key in the definition of the cones to see how the geometry changes</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#   for flag = 0, 1 and 2.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">##############################################################################</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"></div>
<div class="line">:start geometry definition:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ###################################### Define a set of cones</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                       with the same apex and axis but different</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                       opening angles.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                       A cone set extends to infinity and therefore</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                       we will use it as part of 2D geometry to limit</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                       its extend.</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_cones</div>
<div class="line">        type = <a class="code" href="classEGS__ConeSet.html">EGS_ConeSet</a></div>
<div class="line">        name = cone_set</div>
<div class="line">        apex = 0 0 0</div>
<div class="line">        axis = 0 0 1</div>
<div class="line">        opening angles = 10 20 30 40 50 60</div>
<div class="line">        flag = 1         # you can also set <span class="keyword">this</span> to 0 or 2</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #################################### This sphere will be used to limit</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                     the size of the conical regions by a rounded end</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                     as a part of a 2D geometry.</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_spheres</div>
<div class="line">        name    = sphere</div>
<div class="line">        midpoint = 0 0 0</div>
<div class="line">        radii = 5</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    #################################### Now the actual geometry made from the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                    set of cones and the above sphere.</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_ndgeometry</div>
<div class="line">        name = cones</div>
<div class="line">        dimensions = sphere cone_set</div>
<div class="line">        hownear method = 1</div>
<div class="line">        :start media input:</div>
<div class="line">            media = med1 med2 med3 med4 med5 med6</div>
<div class="line">            set medium = 0 0</div>
<div class="line">            set medium = 1 1</div>
<div class="line">            set medium = 2 2</div>
<div class="line">            set medium = 3 3</div>
<div class="line">            set medium = 4 4</div>
<div class="line">            set medium = 5 5</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line">    simulation geometry = cones</div>
<div class="line"></div>
<div class="line">:stop geometry definition:</div>
<div class="line"></div>
</div><!-- fragment --><h1><a class="anchor" id="rz_phi_geom"></a>
A cylinder divided into segments</h1>
<p>file: <code>rz_phi.geom</code><br/>
 <p>This example geometry file shows the use of <a class="el" href="classEGS__IPlanes.html">I-planes </a> to divide a cylinder into azimuthal segments. We define a set of concentric z-cylinders consisting of a single cylinder, <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library = egs_cylinders</div>
<div class="line">        type    = EGS_ZCylinders</div>
<div class="line">        name    = rho_coordinates</div>
<div class="line">        radii   = 2</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> a set of 2 parallel z-planes defining a single region, <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library   = egs_planes</div>
<div class="line">        type      = EGS_Zplanes</div>
<div class="line">        positions = -2 2</div>
<div class="line">        name      = z_coordinates</div>
<div class="line">     :stop geometry:</div>
</div><!-- fragment --> and a set of 6 I-planes defining 12 regions. <div class="fragment"><div class="line">     :start geometry:</div>
<div class="line">        library   = egs_iplanes</div>
<div class="line">        axis      = 0 0 0   0 0 1</div>
<div class="line">        angles    = 0 30 60 90 120 150</div>
<div class="line"><span class="preprocessor">           # above angles are in degrees, you can use</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">           # &#39;angles in radian&#39; to define angles in radians</span></div>
<div class="line"><span class="preprocessor"></span>        name      = phi_coordinates</div>
<div class="line">     :stop geometry:</div>
</div><!-- fragment --> We then use a N-dimensional geometry made of the cone, the planes and the I-planes to form a geometry with 1x1x12=12 regions and fill each region with a different medium to see the effect of the I-planes: <div class="fragment"><div class="line">     :start geometry:</div>
<div class="line">        library   = egs_ndgeometry</div>
<div class="line">        name      = rho_z_phi</div>
<div class="line">        dimensions = rho_coordinates z_coordinates phi_coordinates</div>
<div class="line">        :start media input:</div>
<div class="line">            media = m1 m2 m3 m4 m5 m6 m7 m8 m9 m10 m11 m12</div>
<div class="line">            set medium =  0  0</div>
<div class="line">            set medium =  1  1</div>
<div class="line">            set medium =  2  2</div>
<div class="line">            set medium =  3  3</div>
<div class="line">            set medium =  4  4</div>
<div class="line">            set medium =  5  5</div>
<div class="line">            set medium =  6  6</div>
<div class="line">            set medium =  7  7</div>
<div class="line">            set medium =  8  8</div>
<div class="line">            set medium =  9  9</div>
<div class="line">            set medium = 10 10</div>
<div class="line">            set medium = 11 11</div>
<div class="line">         :stop media input:</div>
<div class="line">     :stop geometry:</div>
</div><!-- fragment --></p>
<p>Here is how the geometry looks like </p>
<div class="image">
<img src="rz_phi_a.png" alt="rz_phi_a.png"/>
</div>
<p> and here is the complete definition </p>
<div class="fragment"><div class="line"></div>
<div class="line"><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc egs++ sample i-planes geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Copyright (C) 2015 National Research Council Canada</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  This file is part of EGSnrc.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc is free software: you can redistribute it and/or modify it under</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  the terms of the GNU Affero General Public License as published by the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Free Software Foundation, either version 3 of the License, or (at your</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  option) any later version.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc is distributed in the hope that it will be useful, but WITHOUT ANY</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License for</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  more details.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  You should have received a copy of the GNU Affero General Public License</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  along with EGSnrc. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Author:          Iwan Kawrakow, 2005</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Contributors:</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#   An example geometry input file for the egs++ geometry package.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#   This input file demonstrates the use of i-planes to divide a region into</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#   phi segments. A 3D geometry is made from a cylinder, a set of planes and</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#   a set of i-planes.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"></div>
<div class="line">:start geometry definition:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ######################################## the cylinder</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_cylinders</div>
<div class="line">        type    = EGS_ZCylinders</div>
<div class="line">        name    = rho_coordinates</div>
<div class="line">        radii   = 2</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ######################################## the planes</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library   = egs_planes</div>
<div class="line">        type      = EGS_Zplanes</div>
<div class="line">        positions = -2 2</div>
<div class="line">        name      = z_coordinates</div>
<div class="line">     :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ######################################## the I-planes</span></div>
<div class="line"><span class="preprocessor"></span>     :start geometry:</div>
<div class="line">        library   = egs_iplanes</div>
<div class="line">        axis      = 0 0 0   0 0 1</div>
<div class="line">        angles    = 0 30 60 90 120 150</div>
<div class="line"><span class="preprocessor">           # above angles are in degrees, you can use</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">           # &#39;angles in radian&#39; to define angles in radians</span></div>
<div class="line"><span class="preprocessor"></span>        name      = phi_coordinates</div>
<div class="line">     :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">     ########################### The final geometry is a N-dimensional geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">     #                made from the cylinder, the planes and the I-planes</span></div>
<div class="line"><span class="preprocessor"></span>     :start geometry:</div>
<div class="line">        library   = egs_ndgeometry</div>
<div class="line">        name      = rho_z_phi</div>
<div class="line">        dimensions = rho_coordinates z_coordinates phi_coordinates</div>
<div class="line">        :start media input:</div>
<div class="line">            media = m1 m2 m3 m4 m5 m6 m7 m8 m9 m10 m11 m12</div>
<div class="line">            set medium =  0  0</div>
<div class="line">            set medium =  1  1</div>
<div class="line">            set medium =  2  2</div>
<div class="line">            set medium =  3  3</div>
<div class="line">            set medium =  4  4</div>
<div class="line">            set medium =  5  5</div>
<div class="line">            set medium =  6  6</div>
<div class="line">            set medium =  7  7</div>
<div class="line">            set medium =  8  8</div>
<div class="line">            set medium =  9  9</div>
<div class="line">            set medium = 10 10</div>
<div class="line">            set medium = 11 11</div>
<div class="line">         :stop media input:</div>
<div class="line">     :stop geometry:</div>
<div class="line"></div>
<div class="line">    simulation geometry = rho_z_phi</div>
<div class="line"></div>
<div class="line">:stop geometry definition:</div>
<div class="line"></div>
<div class="line"></div>
</div><!-- fragment --><h1><a class="anchor" id="xyz_geom"></a>
A XYZ-geometry</h1>
<p>file: <code>xyz.geom</code><br/>
 <p>This example shows a <a class="el" href="classEGS__XYZGeometry.html">XYZ-geometry </a> filled with water and two inhomogeneities made of air and aluminum. The XYZ-geometry class is in the same library as N-dimensional geometries and therefore we have to specify that we are constructing a XYZ-geometry instead of a N-dimensional geometry (the default): <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line"></div>
<div class="line">        library   = egs_ndgeometry</div>
<div class="line">        type      = <a class="code" href="classEGS__XYZGeometry.html">EGS_XYZGeometry</a></div>
<div class="line">        name      = xyz</div>
</div><!-- fragment --> We then define the x-planes, <div class="fragment"><div class="line">        x-planes  = -11 -9 -7 -5 -3 -1 1 3 5 7 9 11</div>
</div><!-- fragment --> the y-planes, <div class="fragment"><div class="line">        y-planes  = -11 -9 -7 -5 -3 -1 1 3 5 7 9 11</div>
</div><!-- fragment --> and the z-planes <div class="fragment"><div class="line">        z-planes  = 0 0.5 1 1.5 2 2.5 3 3.5 4 4.5 5 5.5 6 6.5 7 7.5 8 8.5 9 \</div>
<div class="line">                    10 10.5 11 13 14.5 16 17 20</div>
</div><!-- fragment --> We then define the media for this geometry <div class="fragment"><div class="line">        :start media input:</div>
<div class="line">            media = H2O700ICRU AL700ICRU AIR700ICRU</div>
</div><!-- fragment --> This fills the entire geometry with the first medium (medium 0). We then use <code>set medium</code> keys to define the inhomogeneities: <div class="fragment"><div class="line">            set medium = 4 5 4 5 4 10 1</div>
<div class="line">            set medium = 5 6 5 6 4 10 2</div>
</div><!-- fragment --> This fills all regions with x-indeces 4 or 5, y-indeces 4 or 5 and z-indeces between 4 and 10 with medium 1 (AL700ICRU) and then all regions with x-indeces 5 or 6, y-indeces 5 or 6 and z-indeces between 4 and 10 with medium 2 (AIR700ICRU) (<em>i.e</em>. some of the regions originally set to aluminum get refilled with air by the second <code>set medium</code> key).</p>
<p>Here is a view of this geometry </p>
<div class="image">
<img src="xyz_a.png" alt="xyz_a.png"/>
</div>
<p> Despite the fact that the water has been made semi-transparent, one does not see the inhomogeneities. This is due to the fact that there are many boundaries (corresponding to reflection/transmission surfaces) crossed by the rays used to render the image before they reach the inhomogeneities. At each such boundary the ray becomes weaker due to reflection and absorption and is essentially completely absorbed by the time it reaches the inhomogeneities. Unless, of course, one makes the water completely transparent, in which case one sees the aluminum- and air-filled regions only: </p>
<div class="image">
<img src="xyz_b.png" alt="xyz_b.png"/>
</div>
<p>Here is the complete geometry definition </p>
<div class="fragment"><div class="line"></div>
<div class="line"><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc egs++ sample xyz geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Copyright (C) 2015 National Research Council Canada</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  This file is part of EGSnrc.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc is free software: you can redistribute it and/or modify it under</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  the terms of the GNU Affero General Public License as published by the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Free Software Foundation, either version 3 of the License, or (at your</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  option) any later version.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc is distributed in the hope that it will be useful, but WITHOUT ANY</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License for</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  more details.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  You should have received a copy of the GNU Affero General Public License</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  along with EGSnrc. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Author:          Iwan Kawrakow, 2005</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Contributors:</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  An example geometry input file for the egs++ geometry package.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  This input file defines an egs++ geometry for a simple xyz-geometry filled</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  with water and two inhomogeneities</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"></div>
<div class="line">:start geometry definition:</div>
<div class="line"></div>
<div class="line">    :start geometry:</div>
<div class="line"></div>
<div class="line">        library   = egs_ndgeometry</div>
<div class="line">        type      = <a class="code" href="classEGS__XYZGeometry.html">EGS_XYZGeometry</a></div>
<div class="line">        name      = xyz</div>
<div class="line">        x-planes  = -11 -9 -7 -5 -3 -1 1 3 5 7 9 11</div>
<div class="line">        y-planes  = -11 -9 -7 -5 -3 -1 1 3 5 7 9 11</div>
<div class="line">        z-planes  = 0 0.5 1 1.5 2 2.5 3 3.5 4 4.5 5 5.5 6 6.5 7 7.5 8 8.5 9 \</div>
<div class="line">                    10 10.5 11 13 14.5 16 17 20</div>
<div class="line">        :start media input:</div>
<div class="line">            media = H2O700ICRU AL700ICRU AIR700ICRU</div>
<div class="line">            set medium = 4 5 4 5 4 10 1</div>
<div class="line"><span class="preprocessor">            # the above sets the medium to AL700ICRU in all voxels with</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">            # ix=4,5 iy=4,5 iz=4,10</span></div>
<div class="line"><span class="preprocessor"></span>            set medium = 5 6 5 6 4 10 2</div>
<div class="line"><span class="preprocessor">            # the above sets the medium to AIR700ICRU in all voxels with</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">            # ix=5,6 iy=5,6 iz=4,10 (i.e., some of the voxels previously</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">            # set to AL700ICRU get refilled with air).</span></div>
<div class="line"><span class="preprocessor"></span>        :stop media input:</div>
<div class="line"></div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line">    simulation geometry = xyz</div>
<div class="line"></div>
<div class="line">:stop geometry definition:</div>
<div class="line"></div>
</div><!-- fragment --><h1><a class="anchor" id="mushroom_geom"></a>
A mushroom geometry</h1>
<p>file: <code>mushroom.geom</code> <p>This example geometry file defines a mushroom-like geometrical structure using a <a class="el" href="classEGS__CDGeometry.html">CD-geometry </a> with a <a class="el" href="classEGS__PlanesT.html">set of planes</a> as a base and <a class="el" href="classEGS__cSpheres.html">spheres</a> and <a class="el" href="classEGS__CylindersT.html">cylinders </a> inscribed into the two regions defined by the planes. We first define a set of parallel z-planes, <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library   = egs_planes</div>
<div class="line">        type      = EGS_Zplanes</div>
<div class="line">        name      = the_planes</div>
<div class="line">        positions = 0  4.0  5</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> a sphere filled with <code>medium1</code>, <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library   = egs_spheres</div>
<div class="line">        midpoint  = 0 0 -1</div>
<div class="line">        radii     = 6</div>
<div class="line">        name      = the_sphere</div>
<div class="line">        :start media input:</div>
<div class="line">            media = medium1</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> and a z-cylinder filled with <code>medium2</code> <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library   = egs_cylinders</div>
<div class="line">        type      = EGS_ZCylinders</div>
<div class="line">        name      = the_cylinder</div>
<div class="line">        radii     = 1</div>
<div class="line">        :start media input:</div>
<div class="line">            media = medium2</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> We then use CD-geometry formed by the two regions of the planes as a base and the sphere inscribed into region 1 and the cylinder into region 0: <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library   = egs_cdgeometry</div>
<div class="line">        name      = mushroom</div>
<div class="line">        base geometry = the_planes</div>
<div class="line">        set geometry = 1 the_sphere</div>
<div class="line">        set geometry = 0 the_cylinder</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --></p>
<p>The resulting geometry looks like this </p>
<div class="image">
<img src="mushroom.png" alt="mushroom.png"/>
</div>
<p> and the complete definition is here: </p>
<div class="fragment"><div class="line"></div>
<div class="line"><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc egs++ sample mushroom geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Copyright (C) 2015 National Research Council Canada</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  This file is part of EGSnrc.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc is free software: you can redistribute it and/or modify it under</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  the terms of the GNU Affero General Public License as published by the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Free Software Foundation, either version 3 of the License, or (at your</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  option) any later version.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc is distributed in the hope that it will be useful, but WITHOUT ANY</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License for</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  more details.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  You should have received a copy of the GNU Affero General Public License</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  along with EGSnrc. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Author:          Iwan Kawrakow, 2005</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Contributors:</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#   This input file defines a geometry that looks like a mushroom.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#   The geometry is made from a set of planes, a sphere and a cylinder put</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#   into the two regions defined by the planes as a CD geometry.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">##############################################################################</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"></div>
<div class="line">:start geometry definition:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ################################### The planes</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library   = egs_planes</div>
<div class="line">        type      = EGS_Zplanes</div>
<div class="line">        name      = the_planes</div>
<div class="line">        positions = 0  4.0  5</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ################################### The sphere</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library   = egs_spheres</div>
<div class="line">        midpoint  = 0 0 -1</div>
<div class="line">        radii     = 6</div>
<div class="line">        name      = the_sphere</div>
<div class="line">        :start media input:</div>
<div class="line">            media = medium1</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ################################### The cylinder</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library   = egs_cylinders</div>
<div class="line">        type      = EGS_ZCylinders</div>
<div class="line">        name      = the_cylinder</div>
<div class="line">        radii     = 1</div>
<div class="line">        :start media input:</div>
<div class="line">            media = medium2</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ################################### The CD geometry:</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library   = egs_cdgeometry</div>
<div class="line">        name      = mushroom</div>
<div class="line">        base geometry = the_planes</div>
<div class="line">        set geometry = 1 the_sphere</div>
<div class="line">        set geometry = 0 the_cylinder</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line">    simulation geometry = mushroom</div>
<div class="line"></div>
<div class="line">:stop geometry definition:</div>
<div class="line"></div>
</div><!-- fragment --><h1><a class="anchor" id="I6702_inp"></a>
A brachytherapy seed</h1>
<p>file: <code>I6702.inp</code> <p>This example geometry file defines a <img class="formulaInl" alt="$^{125}$" src="form_10.png"/>I model 6702 brachytherapy seed using a <a class="el" href="classEGS__CDGeometry.html">CD-geometry </a>. The base geometry of the CD-geometry is a set of planes that defines 3 regions: <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library = egs_planes</div>
<div class="line">        name = planes</div>
<div class="line">        type = EGS_Zplanes</div>
<div class="line">        positions = -0.225 -0.175 0.175 0.225</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> The top region (between the planes at -0.225 and -0.175) will be limited by inscribing a sphere filled with titanium: <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library = egs_spheres</div>
<div class="line">        name = seed_top</div>
<div class="line">        midpoint = 0 0 -0.175</div>
<div class="line">        radii = 0.05</div>
<div class="line">        :start media input:</div>
<div class="line">            media = titanium</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> Because the sphere only applies between the planes of region 0 of the set of planes, it becomes a hemisphere that is the top rounded end of the seed. The geometry that we will inscribe into the middle region of the set of planes (between the planes at -0.175 and 0.175) will have the 3 radiactive resin spheres and the titanium walls. To form this geometry, we start by constructing a set of 2 cylinders filling the inner region with air and the outer region with titanium: <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library = egs_cylinders</div>
<div class="line">        name = cladding</div>
<div class="line">        midpoint = 0 0 0</div>
<div class="line">        type = EGS_ZCylinders</div>
<div class="line">        radii = 0.044 0.05</div>
<div class="line">        :start media input:</div>
<div class="line">            media = air titanium</div>
<div class="line">            set medium = 0 1 0</div>
<div class="line">            set medium = 1 2 1</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> We then make the 3 radiactive spheres <div class="fragment"><div class="line"></div>
<div class="line"><span class="preprocessor">    ##################################### the first radioactive sphere</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_spheres</div>
<div class="line">        name = first_sphere</div>
<div class="line">        midpoint = 0 0 -0.11</div>
<div class="line">        radii = 0.03</div>
<div class="line">        :start media input:</div>
<div class="line">            media = resin</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ##################################### the second radioactive sphere</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_spheres</div>
<div class="line">        name = second_sphere</div>
<div class="line">        midpoint = 0 0 0</div>
<div class="line">        radii = 0.03</div>
<div class="line">        :start media input:</div>
<div class="line">            media = resin</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ##################################### the third radioactive sphere</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_spheres</div>
<div class="line">        name = third_sphere</div>
<div class="line">        midpoint = 0 0 0.11</div>
<div class="line">        radii = 0.03</div>
<div class="line">        :start media input:</div>
<div class="line">            media = resin</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> and then inscribe the 3 spheres into the set of cylinders named <code>cladding</code> using an envelope geometry: <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library = egs_genvelope</div>
<div class="line">        name = seed_center</div>
<div class="line">        base geometry = cladding</div>
<div class="line">        inscribed geometries = first_sphere second_sphere third_sphere</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> The bottom region of the set of planes (between 0.175 and 0.225) will be filled with another titanium sphere in a way similar to the top region: <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library = egs_spheres</div>
<div class="line">        name = seed_bottom</div>
<div class="line">        midpoint = 0 0 0.175</div>
<div class="line">        radii = 0.05</div>
<div class="line">        :start media input:</div>
<div class="line">            media = titanium</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> We now have all geometries to be inscribed into the set of planes as a CD-geometry: <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library = egs_cdgeometry</div>
<div class="line">        name = seed</div>
<div class="line">        base geometry = planes</div>
<div class="line">        set geometry = 0 seed_top</div>
<div class="line">        set geometry = 1 seed_center</div>
<div class="line">        set geometry = 2 seed_bottom</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --></p>
<p>This is a view of the resulting brachytherapy seed with the titanium and air media made semi-transparent: </p>
<div class="image">
<img src="I6702b.png" alt="I6702b.png"/>
</div>
<p> and here is an alternative view with 2 clipping planes with normals along the z- and x-axis passing through the origin used to remove 3/4 of the geometry for better viewing the inside: </p>
<div class="image">
<img src="I6702c.png" alt="I6702c.png"/>
</div>
<p>This is the complete geometry definition file, which has been created by Ernesto Mainegra (Note the <code>view control</code> input at the end. Without this input the viewer is not able to automatically find the geometry because it is too small): </p>
<div class="fragment"><div class="line"></div>
<div class="line"><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc egs++ sample brachytherapy seed geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Copyright (C) 2015 National Research Council Canada</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  This file is part of EGSnrc.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc is free software: you can redistribute it and/or modify it under</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  the terms of the GNU Affero General Public License as published by the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Free Software Foundation, either version 3 of the License, or (at your</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  option) any later version.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc is distributed in the hope that it will be useful, but WITHOUT ANY</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License for</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  more details.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  You should have received a copy of the GNU Affero General Public License</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  along with EGSnrc. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Author:          Iwan Kawrakow, 2005</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Contributors:</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  An example geometry input file for the egs++ geometry package.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  This input file defines an egs++ geometry for a I-6702 brachytherapy seed.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  The seed is modeled as a CD geometry. The base geometry for the CD geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  is a set of 4 parallel planes defining 3 regions.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Spheres are inscribed into regions 0 and 2 of the CD geometry to form the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  rounded ends of the seed.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  The middle region of the CD geometry is filled with an envelope geometry.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  The envelope geometry is made of a set of 2 cylinders as the base and 3</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  inscribed spheres thus forming the seed wall and the radiocative</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  material in the middle.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">##############################################################################</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"></div>
<div class="line">:start geometry definition:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ##################################### the set of planes needed for the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                     CD geometry</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_planes</div>
<div class="line">        name = planes</div>
<div class="line">        type = EGS_Zplanes</div>
<div class="line">        positions = -0.225 -0.175 0.175 0.225</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ##################################### the top sphere</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                     (which will turn into a hemisphere</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                      after being put into region 0 of</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                      the set of planes geometry above</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_spheres</div>
<div class="line">        name = seed_top</div>
<div class="line">        midpoint = 0 0 -0.175</div>
<div class="line">        radii = 0.05</div>
<div class="line">        :start media input:</div>
<div class="line">            media = titanium</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ##################################### the set of cylinders</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_cylinders</div>
<div class="line">        name = cladding</div>
<div class="line">        midpoint = 0 0 0</div>
<div class="line">        type = EGS_ZCylinders</div>
<div class="line">        radii = 0.044 0.05</div>
<div class="line">        :start media input:</div>
<div class="line">            media = air titanium</div>
<div class="line">            set medium = 0 1 0</div>
<div class="line">            set medium = 1 2 1</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ##################################### the first radioactive sphere</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_spheres</div>
<div class="line">        name = first_sphere</div>
<div class="line">        midpoint = 0 0 -0.11</div>
<div class="line">        radii = 0.03</div>
<div class="line">        :start media input:</div>
<div class="line">            media = resin</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ##################################### the second radioactive sphere</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_spheres</div>
<div class="line">        name = second_sphere</div>
<div class="line">        midpoint = 0 0 0</div>
<div class="line">        radii = 0.03</div>
<div class="line">        :start media input:</div>
<div class="line">            media = resin</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ##################################### the third radioactive sphere</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_spheres</div>
<div class="line">        name = third_sphere</div>
<div class="line">        midpoint = 0 0 0.11</div>
<div class="line">        radii = 0.03</div>
<div class="line">        :start media input:</div>
<div class="line">            media = resin</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ##################################### the envelope geometry for the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                     middle region</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_genvelope</div>
<div class="line">        name = seed_center</div>
<div class="line">        base geometry = cladding</div>
<div class="line">        inscribed geometries = first_sphere second_sphere third_sphere</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ##################################### the bottom sphere</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                     (which will turn into a hemisphere</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                      after being put into region 2 of</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                      the set of planes geometry above</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_spheres</div>
<div class="line">        name = seed_bottom</div>
<div class="line">        midpoint = 0 0 0.175</div>
<div class="line">        radii = 0.05</div>
<div class="line">        :start media input:</div>
<div class="line">            media = titanium</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ########################################## And now the actual geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                 which is a CD geometry made of the set of planes as</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                 the base geometry and spheres and the cylinder</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                 envelope as inscribed geometries for the 3 regions.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_cdgeometry</div>
<div class="line">        name = seed</div>
<div class="line">        base geometry = planes</div>
<div class="line">        set geometry = 0 seed_top</div>
<div class="line">        set geometry = 1 seed_center</div>
<div class="line">        set geometry = 2 seed_bottom</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line">    simulation geometry = seed</div>
<div class="line"></div>
<div class="line">:stop geometry definition:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">###################### The following view control input helps the viewer</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#                      to find the seed geometry.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#                      It will fail without it as the geometry is too small</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#                      for the position grid used in the initial search for</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#                      the optimum viewing position.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span>:start view control:</div>
<div class="line">  xmin = -0.5</div>
<div class="line">  xmax =  0.5</div>
<div class="line">  ymin = -0.5</div>
<div class="line">  ymax =  0.5</div>
<div class="line">  zmin = -0.5</div>
<div class="line">  zmax =  0.5</div>
<div class="line">:stop view control:</div>
</div><!-- fragment --><h1><a class="anchor" id="rounded_ionchamber_geom"></a>
An ion chamber with rounded ends</h1>
<p>file: <code>rounded_ionchamber.geom</code><br/>
 <p>The file <code>rounded_ionchamber.geom</code> defines an ionization chamber geometry that has rounded ends using a <a class="el" href="classEGS__CDGeometry.html">CD-geometry</a>. We use a set of 4 planes that defines 3 regions for the base of the CD-geometry: <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library   = egs_planes</div>
<div class="line">        type      = EGS_Zplanes</div>
<div class="line">        name      = base_planes</div>
<div class="line">        positions = -2 -1 1 2</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> In the bottom part (between the planes at -2 and -1) we will be inscribing a N-dimensional geometry that is made from a set of spheres and a set of cylinders. Here are the spheres: <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library  = egs_spheres</div>
<div class="line">        name     = top_spheres</div>
<div class="line">        midpoint = 0 0 -1</div>
<div class="line">        radii    = 0.7 1</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> and here the cylinders: <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library  = egs_cylinders</div>
<div class="line">        type     = EGS_ZCylinders</div>
<div class="line">        name     = top_cylinders</div>
<div class="line">        radii    = 0.3  0.7  1</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> When combined into a N-dimensional geometry they will form a geometry with 2x3=6 regions. Regions 0 is within the innermost cylinder and the inner sphere, region 1 within the innermost cylinder and the spherical shell between the outer and inner spheres. These two regions are filled with aluminum to describe the central electrode of the chamber in the bottom part. Region 2 is between the second and first cylinders but within the inner sphere. This region belongs to the air cavity. All other regions are part of the chamber wall. The definition of the N-dimensional geometry describing the top part of the chamber therefore looks like this: <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library    = egs_ndgeometry</div>
<div class="line">        name       = top_chamber_part</div>
<div class="line">        dimensions = top_spheres top_cylinders</div>
<div class="line">        :start media input:</div>
<div class="line">            media = 170C521ICRU AIR521ICRU AL521ICRU</div>
<div class="line">            set medium = 0 5 0</div>
<div class="line">            set medium = 0 2</div>
<div class="line">            set medium = 1 2</div>
<div class="line">            set medium = 2 1</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> (note that I was confused about top and bottom when making this geometry file and therefore the geometry names suggest that the top part is the bottom and vice versa). In the top part of the chamber there is no central electrode. It is therefore sufficient to inscribe the following set of spheres into the bottom region of the planes (the region between the planes at 1 and 2): <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library  = egs_spheres</div>
<div class="line">        name     = bottom_chamber_part</div>
<div class="line">        midpoint = 0 0 1</div>
<div class="line">        radii    = 0.7 1</div>
<div class="line">        :start media input:</div>
<div class="line">            media = 170C521ICRU AIR521ICRU</div>
<div class="line">            set medium = 0 1</div>
<div class="line">            set medium = 1 0</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> The middle portion of the chamber is simply made from a set of 3 cylinders for the central electrode, the air cavity and the wall: <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library  = egs_cylinders</div>
<div class="line">        type     = EGS_ZCylinders</div>
<div class="line">        name     = middle_chamber_part</div>
<div class="line">        radii    = 0.3  0.7  1</div>
<div class="line">        :start media input:</div>
<div class="line">            media = 170C521ICRU AIR521ICRU AL521ICRU</div>
<div class="line">            set medium = 0 2</div>
<div class="line">            set medium = 1 1</div>
<div class="line">            set medium = 2 0</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> The final geometry is then formed as a CD-geometry with the first set of planes as a base and the N-dimensional geometry put into region 0, the set of cylinders into region 1 and the set of spheres into region 2: <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library  = egs_cdgeometry</div>
<div class="line">        name     = chamber</div>
<div class="line">        base geometry = base_planes</div>
<div class="line">        set geometry  = 0 top_chamber_part</div>
<div class="line">        set geometry  = 1 middle_chamber_part</div>
<div class="line">        set geometry  = 2 bottom_chamber_part</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --></p>
<p>Here are different views of the chamber </p>
<div class="image">
<img src="rounded1.png" alt="rounded1.png"/>
</div>
 <div class="image">
<img src="rounded2.png" alt="rounded2.png"/>
</div>
<p> and here is the complete definition file </p>
<div class="fragment"><div class="line"></div>
<div class="line"><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc egs++ sample ionization chamber geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Copyright (C) 2015 National Research Council Canada</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  This file is part of EGSnrc.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc is free software: you can redistribute it and/or modify it under</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  the terms of the GNU Affero General Public License as published by the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Free Software Foundation, either version 3 of the License, or (at your</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  option) any later version.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc is distributed in the hope that it will be useful, but WITHOUT ANY</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License for</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  more details.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  You should have received a copy of the GNU Affero General Public License</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  along with EGSnrc. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Author:          Iwan Kawrakow, 2005</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Contributors:</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  An example geometry input file for the egs++ geometry package.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  This input file defines an egs++ geometry for an ionization chamber with</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  rounded ends, graphite walls and a central electrode made of aluminum.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  The chamber is modeled as a CD geometry. The base geometry of the CD</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  geometry is a set of 4 parallel planes forming 3 regions. The bottom</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  rounded end of the chamber is a set of spheres put into region 2 of the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  planes. The top rounded end of the chamber is a 2D geometry made of set</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  of spheres and a set of cones put into region 0 of the planes. The middle</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  portion of the chamber is made by inscribing a set of cylinders into</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  region 1 of the planes.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"></div>
<div class="line">:start geometry definition:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ################################## the set of planes used as the base</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                  of the CD geometry</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library   = egs_planes</div>
<div class="line">        type      = EGS_Zplanes</div>
<div class="line">        name      = base_planes</div>
<div class="line">        positions = -2 -1 1 2</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ################################# the set of spheres needed for the top</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                 we don&#39;t set the media here as media</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                 will be set in the 2D geometry below</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library  = egs_spheres</div>
<div class="line">        name     = top_spheres</div>
<div class="line">        midpoint = 0 0 -1</div>
<div class="line">        radii    = 0.7 1</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ################################# the set of cylinders needed for the top</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                 we don&#39;t set the media here as media</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                 will be set in the 2D geometry below</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library  = egs_cylinders</div>
<div class="line">        type     = EGS_ZCylinders</div>
<div class="line">        name     = top_cylinders</div>
<div class="line">        radii    = 0.3  0.7  1</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ################################# the 2D geometry for the top chamber end</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                 It is made from the sets of spheres</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                 and cylinders defined above to form</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                 a geometry with 2x3=6 regions</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                 this geometry is inscribed directly into</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                 the set of planes and therefore we</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                 define its media</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library    = egs_ndgeometry</div>
<div class="line">        name       = top_chamber_part</div>
<div class="line">        dimensions = top_spheres top_cylinders</div>
<div class="line">        :start media input:</div>
<div class="line">            media = 170C521ICRU AIR521ICRU AL521ICRU</div>
<div class="line">            set medium = 0 5 0</div>
<div class="line">            set medium = 0 2</div>
<div class="line">            set medium = 1 2</div>
<div class="line">            set medium = 2 1</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ################################# the set of spheres needed for the bottom</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                 this geometry is inscribed directly into</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                 the set of planes and therefore we</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                 define its media</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library  = egs_spheres</div>
<div class="line">        name     = bottom_chamber_part</div>
<div class="line">        midpoint = 0 0 1</div>
<div class="line">        radii    = 0.7 1</div>
<div class="line">        :start media input:</div>
<div class="line">            media = 170C521ICRU AIR521ICRU</div>
<div class="line">            set medium = 0 1</div>
<div class="line">            set medium = 1 0</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ################################# the set of cylinders needed for the middle</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                 this geometry is inscribed directly into</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                 the set of planes and therefore we</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                 define its media</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library  = egs_cylinders</div>
<div class="line">        type     = EGS_ZCylinders</div>
<div class="line">        name     = middle_chamber_part</div>
<div class="line">        radii    = 0.3  0.7  1</div>
<div class="line">        :start media input:</div>
<div class="line">            media = 170C521ICRU AIR521ICRU AL521ICRU</div>
<div class="line">            set medium = 0 2</div>
<div class="line">            set medium = 1 1</div>
<div class="line">            set medium = 2 0</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ################################# the final chamber geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library  = egs_cdgeometry</div>
<div class="line">        name     = chamber</div>
<div class="line">        base geometry = base_planes</div>
<div class="line">        set geometry  = 0 top_chamber_part</div>
<div class="line">        set geometry  = 1 middle_chamber_part</div>
<div class="line">        set geometry  = 2 bottom_chamber_part</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line">    simulation geometry = chamber</div>
<div class="line"></div>
<div class="line">:stop geometry definition:</div>
</div><!-- fragment --><h1><a class="anchor" id="chambers_in_box_geom"></a>
Ion chambers in a box</h1>
<p>file: <code>chambers_in_box.geom</code><br/>
 <p>This example file puts 3 transformed copies of the same chamber geometry as in the <a class="el" href="example_geometries.html#rounded_ionchamber_geom">previous example</a> into a <a class="el" href="classEGS__Box.html">box</a> of water using the functionality provided by <a class="el" href="classEGS__EnvelopeGeometry.html">envelope geometries</a> and <a class="el" href="classEGS__TransformedGeometry.html">transformed geometries</a>. After defining the complete chamber geometry (named <code>chamber</code> and its definition not shown here for the sake of brevity), we define a 10x10x10 box filled with water <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library  = egs_box</div>
<div class="line">        name     = water_box</div>
<div class="line">        box size = 10         # i.e. a 10x10x10 box</div>
<div class="line">        :start media input:</div>
<div class="line">            media = H2O521ICRU</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> and then use a transformed geometry to create 2 replicas of the original chamber <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library  = egs_gtransformed</div>
<div class="line">        my geometry = chamber</div>
<div class="line">        name     = left_chamber</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation = -3 0 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library  = egs_gtransformed</div>
<div class="line">        my geometry = chamber</div>
<div class="line">        name     = other_chamber</div>
<div class="line">        :start transformation:</div>
<div class="line">            rotation vector = 1 1 1</div>
<div class="line">            translation = 1 2 1</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> With the help of an envelope geometry we then inscribe the original chamber and the 2 transformed copies into the water box: <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library  = egs_genvelope</div>
<div class="line">        name = box_with_chambers</div>
<div class="line">        base geometry = water_box</div>
<div class="line">        inscribed geometries = chamber left_chamber other_chamber</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --></p>
<p>A view of this geometry with semi-transparencies is shown here </p>
<div class="image">
<img src="c_in_box.png" alt="c_in_box.png"/>
</div>
<p> An alternative view can be seen on the main page. The complete definition is here </p>
<div class="fragment"><div class="line"></div>
<div class="line"><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc egs++ sample ionization chambers in a box geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Copyright (C) 2015 National Research Council Canada</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  This file is part of EGSnrc.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc is free software: you can redistribute it and/or modify it under</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  the terms of the GNU Affero General Public License as published by the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Free Software Foundation, either version 3 of the License, or (at your</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  option) any later version.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc is distributed in the hope that it will be useful, but WITHOUT ANY</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License for</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  more details.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  You should have received a copy of the GNU Affero General Public License</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  along with EGSnrc. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Author:          Iwan Kawrakow, 2005</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Contributors:</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  An example geometry input file for the egs++ geometry package.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  This input file defines an egs++ geometry for 3 ionization chambers with</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  rounded ends put into a box filled with water. For details of the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  definition of the chamber geometry, see rounded_chamber.geom.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  This input file demonstrates the use of a transformed geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  to easily create replicas of the same geometry and place</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  these at different locations.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">##############################################################################</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"></div>
<div class="line">:start geometry definition:</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ######################### chamber definition ###########################</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">    ################################## the set of planes used as the base</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                  of the CD geometry</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library   = egs_planes</div>
<div class="line">        type      = EGS_Zplanes</div>
<div class="line">        name      = base_planes</div>
<div class="line">        positions = -2 -1 1 2</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ################################# the set of spheres needed for the top</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                 we don&#39;t set the media here as media</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                 will be set in the 2D geometry below</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library  = egs_spheres</div>
<div class="line">        name     = top_spheres</div>
<div class="line">        midpoint = 0 0 -1</div>
<div class="line">        radii    = 0.7 1</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ################################# the set of cylinders needed for the top</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                 we don&#39;t set the media here as media</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                 will be set in the 2D geometry below</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library  = egs_cylinders</div>
<div class="line">        type     = EGS_ZCylinders</div>
<div class="line">        name     = top_cylinders</div>
<div class="line">        radii    = 0.3  0.7  1</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ################################# the 2D geometry for the top chamber end</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                 It is made from the sets of spheres</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                 and cylinders defined above to form</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                 a geometry with 2x3=6 regions</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                 this geometry is inscribed directly into</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                 the set of planes and therefore we</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                 define its media</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library    = egs_ndgeometry</div>
<div class="line">        name       = top_chamber_part</div>
<div class="line">        dimensions = top_spheres top_cylinders</div>
<div class="line">        :start media input:</div>
<div class="line">            media = 170C521ICRU AIR521ICRU AL521ICRU</div>
<div class="line">            set medium = 0 5 0</div>
<div class="line">            set medium = 0 2</div>
<div class="line">            set medium = 1 2</div>
<div class="line">            set medium = 2 1</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ################################# the set of spheres needed for the bottom</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                 this geometry is inscribed directly into</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                 the set of planes and therefore we</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                 define its media</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library  = egs_spheres</div>
<div class="line">        name     = bottom_chamber_part</div>
<div class="line">        midpoint = 0 0 1</div>
<div class="line">        radii    = 0.7 1</div>
<div class="line">        :start media input:</div>
<div class="line">            media = 170C521ICRU AIR521ICRU</div>
<div class="line">            set medium = 0 1</div>
<div class="line">            set medium = 1 0</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ################################# the set of cylinders needed for the middle</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                 this geometry is inscribed directly into</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                 the set of planes and therefore we</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                 define its media</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library  = egs_cylinders</div>
<div class="line">        type     = EGS_ZCylinders</div>
<div class="line">        name     = middle_chamber_part</div>
<div class="line">        radii    = 0.3  0.7  1</div>
<div class="line">        :start media input:</div>
<div class="line">            media = 170C521ICRU AIR521ICRU AL521ICRU</div>
<div class="line">            set medium = 0 2</div>
<div class="line">            set medium = 1 1</div>
<div class="line">            set medium = 2 0</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ################################# the final chamber geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library  = egs_cdgeometry</div>
<div class="line">        name     = chamber</div>
<div class="line">        base geometry = base_planes</div>
<div class="line">        set geometry  = 0 top_chamber_part</div>
<div class="line">        set geometry  = 1 middle_chamber_part</div>
<div class="line">        set geometry  = 2 bottom_chamber_part</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ############################## end of chamber definition ################</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">    ############################### The box filled with water</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library  = egs_box</div>
<div class="line">        name     = water_box</div>
<div class="line">        box size = 10         # i.e. a 10x10x10 box</div>
<div class="line">        :start media input:</div>
<div class="line">            media = H2O521ICRU</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ############################## now make replicas of the chamber</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    ############################## a replica translated along the x axis</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library  = egs_gtransformed</div>
<div class="line">        my geometry = chamber</div>
<div class="line">        name     = left_chamber</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation = -3 0 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
<div class="line"><span class="preprocessor">    ############################## a rotated and translated replica</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library  = egs_gtransformed</div>
<div class="line">        my geometry = chamber</div>
<div class="line">        name     = other_chamber</div>
<div class="line">        :start transformation:</div>
<div class="line">            rotation vector = 1 1 1</div>
<div class="line">            translation = 1 2 1</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ############################# The simulation geometry, which is an</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                             envelope geometry with the box as the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                             envelope and the 3 copies of the chamber</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                             as the inscribed geometries.</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library  = egs_genvelope</div>
<div class="line">        name = box_with_chambers</div>
<div class="line">        base geometry = water_box</div>
<div class="line">        inscribed geometries = chamber left_chamber other_chamber</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line">    simulation geometry = box_with_chambers</div>
<div class="line"></div>
<div class="line">:stop geometry definition:</div>
</div><!-- fragment --><h1><a class="anchor" id="seeds_in_xyz_geom"></a>
Brachytherapy seeds in a XYZ geometry</h1>
<p>file: <code>seeds_in_xyz.geom</code><br/>
 <p>This file demonstrates that one can inscribe a complex geometry into another complex geometry using an <a class="el" href="classEGS__EnvelopeGeometry.html">envelope geometry</a>. We use the brachytherapy seed geometry discussed in <a class="el" href="example_geometries.html#I6702_inp">this example</a> as the complex geometry to be inscribed. For the sake of brevity the definition is not shown here. We then construct another complex geometry. In this example we use a homogeneous XYZ-geometry, but the XYZ-geometry could also have been heterogeneous: <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library   = egs_ndgeometry</div>
<div class="line">        type      = <a class="code" href="classEGS__XYZGeometry.html">EGS_XYZGeometry</a></div>
<div class="line">        name      = xyz</div>
<div class="line">        x-planes  = -5.5 -4.5 -3.5 -2.5 -1.5 -0.5 0.5 1.5 2.5 3.5 4.5 5.5</div>
<div class="line">        y-planes  = -5.5 -4.5 -3.5 -2.5 -1.5 -0.5 0.5 1.5 2.5 3.5 4.5 5.5</div>
<div class="line">        z-planes  = -5.5 -4.5 -3.5 -2.5 -1.5 -0.5 0.5 1.5 2.5 3.5 4.5 5.5</div>
<div class="line">        :start media input:</div>
<div class="line">            media = H2O700ICRU</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> We then create 12 copies of the seed geometry named <code>seed</code> (only the first 2 definitions are shown) using a <a class="el" href="classEGS__TransformedGeometry.html">transformed geometry</a>: <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library = egs_gtransformed</div>
<div class="line">        name = seed_1</div>
<div class="line">        my geometry = seed</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation = -3 -3 0</div>
<div class="line">            rotation vector = 1 -1 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_gtransformed</div>
<div class="line">        name = seed_2</div>
<div class="line">        my geometry = seed</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation = -2 -2 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> and then inscribe these 12 copies into the XYZ geometry: <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library  = egs_genvelope</div>
<div class="line">        base geometry = xyz</div>
<div class="line">        name = seeds_in_box</div>
<div class="line">        inscribed geometries = seed seed_1 seed_2 seed_3 seed_4 seed_5 seed_6 \</div>
<div class="line">                         seed_7 seed_8 seed_9 seed_10 seed_11 seed_12</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --></p>
<p>A view of the geometry where the water has been made transparent and a strong zoom factor has been applied so that only a few of the seeds are seen (the seeds are very small compared to the overal geometry size) is shown here: </p>
<div class="image">
<img src="seeds_in_xyz.png" alt="seeds_in_xyz.png"/>
</div>
<p>The complete definition is here: </p>
<div class="fragment"><div class="line"></div>
<div class="line"><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc egs++ sample brachytherapy seeds geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Copyright (C) 2015 National Research Council Canada</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  This file is part of EGSnrc.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc is free software: you can redistribute it and/or modify it under</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  the terms of the GNU Affero General Public License as published by the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Free Software Foundation, either version 3 of the License, or (at your</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  option) any later version.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc is distributed in the hope that it will be useful, but WITHOUT ANY</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License for</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  more details.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  You should have received a copy of the GNU Affero General Public License</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  along with EGSnrc. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Author:          Iwan Kawrakow, 2005</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Contributors:</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  An example geometry input file for the egs++ geometry package.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  This input file defines an egs++ geometry for a series of brachytherapy</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  seeds put into a xyz-geometry filled with water.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  It demonstrates the use of a transformed geometry to easily create replicas</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  of the same geometry and place them at different locations and orientations.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  It also demonstrates that the envelope of an envelope geometry may have</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  more than one region. This type of geometry would be useful to calculate</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  for instance interseed effects (although, one should use much smaller voxels</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  than in this example).</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"></div>
<div class="line">:start geometry definition:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ######################## begin of seed definition #######################</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">    ##################################### the set of planes needed for the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                     CD geometry</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_planes</div>
<div class="line">        name = planes</div>
<div class="line">        type = EGS_Zplanes</div>
<div class="line">        positions = -0.225 -0.175 0.175 0.225</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ##################################### the top sphere</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                     (which will turn into a hemisphere</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                      after being put into region 0 of</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                      the set of planes geometry above</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_spheres</div>
<div class="line">        name = seed_top</div>
<div class="line">        midpoint = 0 0 -0.175</div>
<div class="line">        radii = 0.05</div>
<div class="line">        :start media input:</div>
<div class="line">            media = titanium</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ##################################### the set of cylinders</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_cylinders</div>
<div class="line">        name = cladding</div>
<div class="line">        midpoint = 0 0 0</div>
<div class="line">        type = EGS_ZCylinders</div>
<div class="line">        radii = 0.044 0.05</div>
<div class="line">        :start media input:</div>
<div class="line">            media = air titanium</div>
<div class="line">            set medium = 0 1 0</div>
<div class="line">            set medium = 1 2 1</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ##################################### the first radioactive sphere</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_spheres</div>
<div class="line">        name = first_sphere</div>
<div class="line">        midpoint = 0 0 -0.11</div>
<div class="line">        radii = 0.03</div>
<div class="line">        :start media input:</div>
<div class="line">            media = resin</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ##################################### the second radioactive sphere</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_spheres</div>
<div class="line">        name = second_sphere</div>
<div class="line">        midpoint = 0 0 0</div>
<div class="line">        radii = 0.03</div>
<div class="line">        :start media input:</div>
<div class="line">            media = resin</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ##################################### the third radioactive sphere</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_spheres</div>
<div class="line">        name = third_sphere</div>
<div class="line">        midpoint = 0 0 0.11</div>
<div class="line">        radii = 0.03</div>
<div class="line">        :start media input:</div>
<div class="line">            media = resin</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ##################################### the envelope geometry for the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                     middle region</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_genvelope</div>
<div class="line">        name = seed_center</div>
<div class="line">        base geometry = cladding</div>
<div class="line">        inscribed geometries = first_sphere second_sphere third_sphere</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ##################################### the bottom sphere</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                     (which will turn into a hemisphere</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                      after being put into region 2 of</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                      the set of planes geometry above</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_spheres</div>
<div class="line">        name = seed_bottom</div>
<div class="line">        midpoint = 0 0 0.175</div>
<div class="line">        radii = 0.05</div>
<div class="line">        :start media input:</div>
<div class="line">            media = titanium</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ########################################## And now the actual geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                 which is a CD geometry made of the set of planes as</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                 the base geometry and spheres and the cylinder</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                 envelope as inscribed geometries for the 3 regions.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_cdgeometry</div>
<div class="line">        name = seed</div>
<div class="line">        base geometry = planes</div>
<div class="line">        set geometry = 0 seed_top</div>
<div class="line">        set geometry = 1 seed_center</div>
<div class="line">        set geometry = 2 seed_bottom</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ######################## end of seed definition #######################</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">    ######################## now define a XYZ-geometry to serve as the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                        envelope</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library   = egs_ndgeometry</div>
<div class="line">        type      = <a class="code" href="classEGS__XYZGeometry.html">EGS_XYZGeometry</a></div>
<div class="line">        name      = xyz</div>
<div class="line">        x-planes  = -5.5 -4.5 -3.5 -2.5 -1.5 -0.5 0.5 1.5 2.5 3.5 4.5 5.5</div>
<div class="line">        y-planes  = -5.5 -4.5 -3.5 -2.5 -1.5 -0.5 0.5 1.5 2.5 3.5 4.5 5.5</div>
<div class="line">        z-planes  = -5.5 -4.5 -3.5 -2.5 -1.5 -0.5 0.5 1.5 2.5 3.5 4.5 5.5</div>
<div class="line">        :start media input:</div>
<div class="line">            media = H2O700ICRU</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ######################### make copies of the seed</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_gtransformed</div>
<div class="line">        name = seed_1</div>
<div class="line">        my geometry = seed</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation = -3 -3 0</div>
<div class="line">            rotation vector = 1 -1 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_gtransformed</div>
<div class="line">        name = seed_2</div>
<div class="line">        my geometry = seed</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation = -2 -2 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_gtransformed</div>
<div class="line">        name = seed_3</div>
<div class="line">        my geometry = seed</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation = -1 -1 0</div>
<div class="line">            rotation vector = 1 -1 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_gtransformed</div>
<div class="line">        name = seed_4</div>
<div class="line">        my geometry = seed</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation =  1  1 0</div>
<div class="line">            rotation vector = 1 -1 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_gtransformed</div>
<div class="line">        name = seed_5</div>
<div class="line">        my geometry = seed</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation =  2  2 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_gtransformed</div>
<div class="line">        name = seed_6</div>
<div class="line">        my geometry = seed</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation =  3  3 0</div>
<div class="line">            rotation vector = 1 -1 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_gtransformed</div>
<div class="line">        name = seed_7</div>
<div class="line">        my geometry = seed</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation = 3 -3 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_gtransformed</div>
<div class="line">        name = seed_8</div>
<div class="line">        my geometry = seed</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation = 2 -2 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_gtransformed</div>
<div class="line">        name = seed_9</div>
<div class="line">        my geometry = seed</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation = 1 -1 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_gtransformed</div>
<div class="line">        name = seed_10</div>
<div class="line">        my geometry = seed</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation = -1  1 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_gtransformed</div>
<div class="line">        name = seed_11</div>
<div class="line">        my geometry = seed</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation = -2  2 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_gtransformed</div>
<div class="line">        name = seed_12</div>
<div class="line">        my geometry = seed</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation = -3  3 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ########################### now define the final geometry</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library  = egs_genvelope</div>
<div class="line">        base geometry = xyz</div>
<div class="line">        name = seeds_in_box</div>
<div class="line">        inscribed geometries = seed seed_1 seed_2 seed_3 seed_4 seed_5 seed_6 \</div>
<div class="line">                         seed_7 seed_8 seed_9 seed_10 seed_11 seed_12</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">    simulation geometry = seeds_in_box</div>
<div class="line"></div>
<div class="line">:stop geometry definition:</div>
<div class="line"></div>
</div><!-- fragment --><h1><a class="anchor" id="seeds_in_xyz1_geom"></a>
Better implementation of seeds in a XYZ geometry</h1>
<p>file: <code>seeds_in_xyz1.geom</code><br/>
 <p>When trying to view the geometry of the <a class="el" href="example_geometries.html#seeds_in_xyz_geom">previous example</a> one quickly notices that the rendering of the image is quite slow. This is due to the fact that by using an envelope geometry all 12 seeds must be checked for intersections when tracing the light rays through the geometry and because the seed geometry is quite complex this process is slow. A better way of defining this geometry is to use a <a class="el" href="classEGS__CDGeometry.html">CD-geometry</a> with the XYZ-geometry as its base geometry and to then inscribe each seed into the XYZ region corresponding to its position. In this way a given seed will only be checked for intersections if the light ray (or a particle trajectory) enters the XYZ region in which the seed is placed. To realize this idea we create the seed (not shown) and the XYZ geometry (not shown). We then create a <a class="el" href="classEGS__Space.html">space geometry</a> that fills the entire space and use envelope geometries to inscribe the transformed seed copies into the space geometry (only the first 2 are shown): <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library = egs_space</div>
<div class="line">        name = space</div>
<div class="line">        :start media input:</div>
<div class="line">            media = H2O700ICRU</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_genvelope</div>
<div class="line">        base geometry = space</div>
<div class="line">        inscribed geometries = seed_1</div>
<div class="line">        name = s1</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_genvelope</div>
<div class="line">        base geometry = space</div>
<div class="line">        inscribed geometries = seed_2</div>
<div class="line">        name = s2</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> We then inscribe the seeds surounded by the space geometry into the corresponding regions of the XYZ-geometry forming a CD-geometry: <div class="fragment"><div class="line"><span class="preprocessor">    ########################### now define the final geometry</span></div>
<div class="line"><span class="preprocessor">    #   the annoing part here is that we have to calculate the region</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #   numbers ourself</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library  = egs_cdgeometry</div>
<div class="line">        base geometry = xyz</div>
<div class="line">        name = seeds_in_box</div>
<div class="line">        set geometry = 629  s1</div>
<div class="line">        set geometry = 641  s2</div>
<div class="line">        set geometry = 653  s3</div>
<div class="line">        set geometry = 665  s0</div>
<div class="line">        set geometry = 677  s4</div>
<div class="line">        set geometry = 689  s5</div>
<div class="line">        set geometry = 701  s6</div>
<div class="line">        set geometry = 635  s7</div>
<div class="line">        set geometry = 645  s8</div>
<div class="line">        set geometry = 655  s9</div>
<div class="line">        set geometry = 675  s10</div>
<div class="line">        set geometry = 685  s11</div>
<div class="line">        set geometry = 695  s12</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> It is necessary to first put the seeds into an infinite envelope because otherwise the XYZ-regions in which the seeds are inscribed will vecome void outside of the seeds. This results from the logic used to implement the geometry methods of a CD geometry (see the <a class="el" href="classEGS__CDGeometry.html" title="A &quot;combinatorial dimension&quot; geometry. ">EGS_CDGeometry</a> class documentation).</p>
<p>The much better speed is noticable when rendering the image in the viewer. No image is shown as it is the same as in the <a class="el" href="example_geometries.html#seeds_in_xyz_geom">previous example</a>.</p>
<p>The complete definition is here: </p>
<div class="fragment"><div class="line"></div>
<div class="line"><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc egs++ sample brachytherapy seeds geometry, using a cd geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Copyright (C) 2015 National Research Council Canada</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  This file is part of EGSnrc.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc is free software: you can redistribute it and/or modify it under</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  the terms of the GNU Affero General Public License as published by the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Free Software Foundation, either version 3 of the License, or (at your</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  option) any later version.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc is distributed in the hope that it will be useful, but WITHOUT ANY</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License for</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  more details.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  You should have received a copy of the GNU Affero General Public License</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  along with EGSnrc. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Author:          Iwan Kawrakow, 2005</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Contributors:</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  An example geometry input file for the egs++ geometry package.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  This input file defines an egs++ geometry for a series of brachytherapy</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  seeds put into a xyz-geometry filled with water. It is very similar to the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  seeds_in_xyz.geom file but now the seeds are inscribed in a xyz geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  using a CD geometry instead of an envelope.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"></div>
<div class="line">:start geometry definition:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ######################## begin of seed definition #######################</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">    ##################################### the set of planes needed for the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                     CD geometry</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_planes</div>
<div class="line">        name = planes</div>
<div class="line">        type = EGS_Zplanes</div>
<div class="line">        positions = -0.225 -0.175 0.175 0.225</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ##################################### the top sphere</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                     (which will turn into a hemisphere</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                      after being put into region 0 of</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                      the set of planes geometry above</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_spheres</div>
<div class="line">        name = seed_top</div>
<div class="line">        midpoint = 0 0 -0.175</div>
<div class="line">        radii = 0.05</div>
<div class="line">        :start media input:</div>
<div class="line">            media = titanium</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ##################################### the set of cylinders</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_cylinders</div>
<div class="line">        name = cladding</div>
<div class="line">        midpoint = 0 0 0</div>
<div class="line">        type = EGS_ZCylinders</div>
<div class="line">        radii = 0.044 0.05</div>
<div class="line">        :start media input:</div>
<div class="line">            media = air titanium</div>
<div class="line">            set medium = 0 1 0</div>
<div class="line">            set medium = 1 2 1</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ##################################### the first radioactive sphere</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_spheres</div>
<div class="line">        name = first_sphere</div>
<div class="line">        midpoint = 0 0 -0.11</div>
<div class="line">        radii = 0.03</div>
<div class="line">        :start media input:</div>
<div class="line">            media = resin</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ##################################### the second radioactive sphere</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_spheres</div>
<div class="line">        name = second_sphere</div>
<div class="line">        midpoint = 0 0 0</div>
<div class="line">        radii = 0.03</div>
<div class="line">        :start media input:</div>
<div class="line">            media = resin</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ##################################### the third radioactive sphere</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_spheres</div>
<div class="line">        name = third_sphere</div>
<div class="line">        midpoint = 0 0 0.11</div>
<div class="line">        radii = 0.03</div>
<div class="line">        :start media input:</div>
<div class="line">            media = resin</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ##################################### the envelope geometry for the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                     middle region</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_genvelope</div>
<div class="line">        name = seed_center</div>
<div class="line">        base geometry = cladding</div>
<div class="line">        inscribed geometries = first_sphere second_sphere third_sphere</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ##################################### the bottom sphere</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                     (which will turn into a hemisphere</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                      after being put into region 2 of</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                      the set of planes geometry above</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_spheres</div>
<div class="line">        name = seed_bottom</div>
<div class="line">        midpoint = 0 0 0.175</div>
<div class="line">        radii = 0.05</div>
<div class="line">        :start media input:</div>
<div class="line">            media = titanium</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ########################################## And now the actual geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                 which is a CD geometry made of the set of planes as</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                 the base geometry and spheres and the cylinder</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                 envelope as inscribed geometries for the 3 regions.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_cdgeometry</div>
<div class="line">        name = seed</div>
<div class="line">        base geometry = planes</div>
<div class="line">        set geometry = 0 seed_top</div>
<div class="line">        set geometry = 1 seed_center</div>
<div class="line">        set geometry = 2 seed_bottom</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ######################## end of seed definition #######################</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">    ######################## now define a XYZ-geometry to serve as the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                        envelope</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library   = egs_ndgeometry</div>
<div class="line">        type      = <a class="code" href="classEGS__XYZGeometry.html">EGS_XYZGeometry</a></div>
<div class="line">        name      = xyz</div>
<div class="line">        x-planes  = -5.5 -4.5 -3.5 -2.5 -1.5 -0.5 0.5 1.5 2.5 3.5 4.5 5.5</div>
<div class="line">        y-planes  = -5.5 -4.5 -3.5 -2.5 -1.5 -0.5 0.5 1.5 2.5 3.5 4.5 5.5</div>
<div class="line">        z-planes  = -5.5 -4.5 -3.5 -2.5 -1.5 -0.5 0.5 1.5 2.5 3.5 4.5 5.5</div>
<div class="line">        :start media input:</div>
<div class="line">            media = H2O700ICRU</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ######################### make copies of the seed</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_gtransformed</div>
<div class="line">        name = seed_1</div>
<div class="line">        my geometry = seed</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation = -3 -3 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_gtransformed</div>
<div class="line">        name = seed_2</div>
<div class="line">        my geometry = seed</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation = -2 -2 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_gtransformed</div>
<div class="line">        name = seed_3</div>
<div class="line">        my geometry = seed</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation = -1 -1 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_gtransformed</div>
<div class="line">        name = seed_4</div>
<div class="line">        my geometry = seed</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation =  1  1 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_gtransformed</div>
<div class="line">        name = seed_5</div>
<div class="line">        my geometry = seed</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation =  2  2 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_gtransformed</div>
<div class="line">        name = seed_6</div>
<div class="line">        my geometry = seed</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation =  3  3 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_gtransformed</div>
<div class="line">        name = seed_7</div>
<div class="line">        my geometry = seed</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation = 3 -3 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_gtransformed</div>
<div class="line">        name = seed_8</div>
<div class="line">        my geometry = seed</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation = 2 -2 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_gtransformed</div>
<div class="line">        name = seed_9</div>
<div class="line">        my geometry = seed</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation = 1 -1 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_gtransformed</div>
<div class="line">        name = seed_10</div>
<div class="line">        my geometry = seed</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation = -1  1 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_gtransformed</div>
<div class="line">        name = seed_11</div>
<div class="line">        my geometry = seed</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation = -2  2 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_gtransformed</div>
<div class="line">        name = seed_12</div>
<div class="line">        my geometry = seed</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation = -3  3 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ########################### a space geometry to use as an envelope</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_space</div>
<div class="line">        name = space</div>
<div class="line">        :start media input:</div>
<div class="line">            media = H2O700ICRU</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ################# the above transformed seeds put into a space envelope</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_genvelope</div>
<div class="line">        base geometry = space</div>
<div class="line">        inscribed geometries = seed_1</div>
<div class="line">        name = s1</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_genvelope</div>
<div class="line">        base geometry = space</div>
<div class="line">        inscribed geometries = seed_2</div>
<div class="line">        name = s2</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_genvelope</div>
<div class="line">        base geometry = space</div>
<div class="line">        inscribed geometries = seed_3</div>
<div class="line">        name = s3</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_genvelope</div>
<div class="line">        base geometry = space</div>
<div class="line">        inscribed geometries = seed_4</div>
<div class="line">        name = s4</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_genvelope</div>
<div class="line">        base geometry = space</div>
<div class="line">        inscribed geometries = seed_5</div>
<div class="line">        name = s5</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_genvelope</div>
<div class="line">        base geometry = space</div>
<div class="line">        inscribed geometries = seed_6</div>
<div class="line">        name = s6</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_genvelope</div>
<div class="line">        base geometry = space</div>
<div class="line">        inscribed geometries = seed_7</div>
<div class="line">        name = s7</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_genvelope</div>
<div class="line">        base geometry = space</div>
<div class="line">        inscribed geometries = seed_8</div>
<div class="line">        name = s8</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_genvelope</div>
<div class="line">        base geometry = space</div>
<div class="line">        inscribed geometries = seed_9</div>
<div class="line">        name = s9</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_genvelope</div>
<div class="line">        base geometry = space</div>
<div class="line">        inscribed geometries = seed_10</div>
<div class="line">        name = s10</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_genvelope</div>
<div class="line">        base geometry = space</div>
<div class="line">        inscribed geometries = seed_11</div>
<div class="line">        name = s11</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_genvelope</div>
<div class="line">        base geometry = space</div>
<div class="line">        inscribed geometries = seed_12</div>
<div class="line">        name = s12</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_genvelope</div>
<div class="line">        base geometry = space</div>
<div class="line">        inscribed geometries = seed</div>
<div class="line">        name = s0</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ########################### now define the final geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #   the annoing part here is that we have to calculate the region</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #   numbers ourself</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library  = egs_cdgeometry</div>
<div class="line">        base geometry = xyz</div>
<div class="line">        name = seeds_in_box</div>
<div class="line">        set geometry = 629  s1</div>
<div class="line">        set geometry = 641  s2</div>
<div class="line">        set geometry = 653  s3</div>
<div class="line">        set geometry = 665  s0</div>
<div class="line">        set geometry = 677  s4</div>
<div class="line">        set geometry = 689  s5</div>
<div class="line">        set geometry = 701  s6</div>
<div class="line">        set geometry = 635  s7</div>
<div class="line">        set geometry = 645  s8</div>
<div class="line">        set geometry = 655  s9</div>
<div class="line">        set geometry = 675  s10</div>
<div class="line">        set geometry = 685  s11</div>
<div class="line">        set geometry = 695  s12</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">    simulation geometry = seeds_in_box</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">:stop geometry definition:</div>
<div class="line"></div>
</div><!-- fragment --><h1><a class="anchor" id="car_geom"></a>
A car geometry</h1>
<p>file: <code>car.geom</code><br/>
 <p>This example geometry file models a car that looks like this: </p>
<div class="image">
<img src="car1.png" alt="car1.png"/>
</div>
<p> We start by creating the front wheels of the car using a <a class="el" href="classEGS__ConeStack.html">cone stack</a> with the wheel axis along the x-axis: <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library = egs_cones</div>
<div class="line">        type    = <a class="code" href="classEGS__ConeStack.html">EGS_ConeStack</a></div>
<div class="line">        name    = front_wheels</div>
<div class="line">        axis    = -3.5 -3 -1  1 0 0</div>
<div class="line">        :start layer:</div>
<div class="line">            thickness    = 0.5</div>
<div class="line">            top radii    = 2</div>
<div class="line">            bottom radii = 2</div>
<div class="line">            media        = wheel_medium</div>
<div class="line">        :stop layer:</div>
<div class="line">        :start layer:</div>
<div class="line">            thickness    = 6</div>
<div class="line">            top radii    = 0.5 2</div>
<div class="line">            bottom radii = 0.5 2</div>
<div class="line">            media        = axis_medium vacuum</div>
<div class="line">        :stop layer:</div>
<div class="line">        :start layer:</div>
<div class="line">            thickness    = 0.5</div>
<div class="line">            top radii    = 2</div>
<div class="line">            bottom radii = 2</div>
<div class="line">            media        = wheel_medium</div>
<div class="line">        :stop layer:</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> The first and last layers are the wheels and the second layer the wheel axis. We crfeate the rear wheels as a transformed copy of the front wheels: <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library = egs_gtransformed</div>
<div class="line">        my geometry = front_wheels</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation = 0 6 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">        name = rear_wheels</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> We will model the car body as two boxes: <div class="fragment"><div class="line"></div>
<div class="line"><span class="preprocessor">    ######################################## the lower car body</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_box</div>
<div class="line">        box size = 5 14 3</div>
<div class="line">        name = lower_car_body</div>
<div class="line">        :start media input:</div>
<div class="line">            media = body_medium</div>
<div class="line">        :stop media input:</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation = 0 -1 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ####################################### the upper car body</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_box</div>
<div class="line">        box size = 5  6 2</div>
<div class="line">        name = upper_car_body</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation = 0 0 2.5</div>
<div class="line">        :stop transformation:</div>
<div class="line">        :start media input:</div>
<div class="line">            media = body_medium</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> The lights are modeled as cone stacks and not shown here for the sake of brevity. The complete car is the <a class="el" href="classEGS__UnionGeometry.html">union</a> of the front and rear wheels, the car body and the lights: <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library = egs_gunion</div>
<div class="line">        name    = the_car</div>
<div class="line">        geometries = upper_car_body lower_car_body front_wheels rear_wheels ,</div>
<div class="line">                     left_light right_light</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> We then put the whole car into a vacuum box using an envelope geometry.</p>
<p>The complete geometry definition file is here </p>
<div class="fragment"><div class="line"></div>
<div class="line"><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc egs++ sample car geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Copyright (C) 2015 National Research Council Canada</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  This file is part of EGSnrc.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc is free software: you can redistribute it and/or modify it under</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  the terms of the GNU Affero General Public License as published by the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Free Software Foundation, either version 3 of the License, or (at your</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  option) any later version.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc is distributed in the hope that it will be useful, but WITHOUT ANY</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License for</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  more details.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  You should have received a copy of the GNU Affero General Public License</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  along with EGSnrc. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Author:          Iwan Kawrakow, 2005</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Contributors:</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#   An example geometry input file for the egs++ geometry package.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#   This input file defines a geometry that looks like a car. The geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#   is made from various geometry objects put into a geometry union.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">##############################################################################</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"></div>
<div class="line">:start geometry definition:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ######################################## the front wheels</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_cones</div>
<div class="line">        type    = <a class="code" href="classEGS__ConeStack.html">EGS_ConeStack</a></div>
<div class="line">        name    = front_wheels</div>
<div class="line">        axis    = -3.5 -3 -1  1 0 0</div>
<div class="line">        :start layer:</div>
<div class="line">            thickness    = 0.5</div>
<div class="line">            top radii    = 2</div>
<div class="line">            bottom radii = 2</div>
<div class="line">            media        = wheel_medium</div>
<div class="line">        :stop layer:</div>
<div class="line">        :start layer:</div>
<div class="line">            thickness    = 6</div>
<div class="line">            top radii    = 0.5 2</div>
<div class="line">            bottom radii = 0.5 2</div>
<div class="line">            media        = axis_medium vacuum</div>
<div class="line">        :stop layer:</div>
<div class="line">        :start layer:</div>
<div class="line">            thickness    = 0.5</div>
<div class="line">            top radii    = 2</div>
<div class="line">            bottom radii = 2</div>
<div class="line">            media        = wheel_medium</div>
<div class="line">        :stop layer:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ######################################## the rear wheels</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #    modeled using a transformed geometry of the front wheels</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_gtransformed</div>
<div class="line">        my geometry = front_wheels</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation = 0 6 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">        name = rear_wheels</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ######################################## the lower car body</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_box</div>
<div class="line">        box size = 5 14 3</div>
<div class="line">        name = lower_car_body</div>
<div class="line">        :start media input:</div>
<div class="line">            media = body_medium</div>
<div class="line">        :stop media input:</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation = 0 -1 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ####################################### the upper car body</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_box</div>
<div class="line">        box size = 5  6 2</div>
<div class="line">        name = upper_car_body</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation = 0 0 2.5</div>
<div class="line">        :stop transformation:</div>
<div class="line">        :start media input:</div>
<div class="line">            media = body_medium</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ####################################### the lights</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_cones</div>
<div class="line">        type = <a class="code" href="classEGS__ConeStack.html">EGS_ConeStack</a></div>
<div class="line">        axis = -1.5 -8.2 0   0 1 0</div>
<div class="line">        :start layer:</div>
<div class="line">            thickness = 0.25</div>
<div class="line">            top radii = 0.75</div>
<div class="line">            bottom radii = 0.75</div>
<div class="line">            media = lights_medium</div>
<div class="line">        :stop layer:</div>
<div class="line">        name = left_light</div>
<div class="line">    :stop geometry:</div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_gtransformed</div>
<div class="line">        my geometry = left_light</div>
<div class="line">        name = right_light</div>
<div class="line">        :start transformation:</div>
<div class="line">            translation = 3.0 0 0</div>
<div class="line">        :stop transformation:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ######################################## combine everything into a union</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_gunion</div>
<div class="line">        name    = the_car</div>
<div class="line">        geometries = upper_car_body lower_car_body front_wheels rear_wheels ,</div>
<div class="line">                     left_light right_light</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_box</div>
<div class="line">        name    = the_box</div>
<div class="line">        box size = 18</div>
<div class="line">        :start media input:</div>
<div class="line">            media = vacuum</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line">    :start geometry:</div>
<div class="line">        library = egs_genvelope</div>
<div class="line">        name = car_in_box</div>
<div class="line">        base geometry = the_box</div>
<div class="line">        inscribed geometries = the_car</div>
<div class="line">     :stop geometry:</div>
<div class="line"></div>
<div class="line">     simulation geometry = car_in_box</div>
<div class="line"></div>
<div class="line">:stop geometry definition:</div>
<div class="line"></div>
</div><!-- fragment --><h1><a class="anchor" id="linac_geom"></a>
A linear accelerator geometry</h1>
<p>file: <code>photon_linac.geom</code><br/>
 <p>This example demonstrate how the egspp geometry package can be used to model a complex geometry such as the treatment head of a medical linear accelerator (linac). The linac geometry, which is the same as the geometry defined in the <code>EX16MVp.egsinp</code> example input file distributed with BEAMnrc, is modeled as a <a class="el" href="classEGS__CDGeometry.html">CD-Geometry</a>. The base geometry of the CD-Geometry is a <a class="el" href="classEGS__ConeStack.html">cone stack</a>. The cone stack can be used to define most of the linac geometry. After specifying that we are using a cone stack from the <code>egs_cones</code> geometry DSO, the axis and the name of the cone stack <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line"></div>
<div class="line">        library = egs_cones      # <span class="keyword">this</span> is the geometry library</div>
<div class="line">        type    = <a class="code" href="classEGS__ConeStack.html">EGS_ConeStack</a>  # <span class="keyword">this</span> is the <span class="keywordtype">object</span> type that we need</div>
<div class="line"><span class="preprocessor">                                 # from the geometry library egs_cones</span></div>
<div class="line"><span class="preprocessor"></span>        axis    = 0 0 0   0 0 1  # we use the z-axis as the axis of</div>
<div class="line"><span class="preprocessor">                                 # the cone stack</span></div>
<div class="line"><span class="preprocessor">        name    = linac          # and give it the very original name &#39;linac&#39;</span></div>
</div><!-- fragment --> we start adding the various layers that make up the linac geometry: the bremsstrahlung target, <div class="fragment"><div class="line">        :start layer:</div>
<div class="line">            thickness    = 0.5</div>
<div class="line">            top radii    = 2.5  9.11111</div>
<div class="line">            bottom radii = 2.5  9.11111</div>
<div class="line">            media        = W700ICRU AIR700ICRU</div>
<div class="line">        :stop layer:</div>
</div><!-- fragment --> the air between the target and the primary collimator, <div class="fragment"><div class="line">        :start layer:</div>
<div class="line">            thickness    = 0.4</div>
<div class="line">            bottom radii = 2.5  9.11111</div>
<div class="line">            media        = AIR700ICRU AIR700ICRU</div>
<div class="line">        :stop layer:</div>
</div><!-- fragment --> the primary collimator, <div class="fragment"><div class="line">        :start layer:</div>
<div class="line">            thickness    = 5</div>
<div class="line">            top radii    = 0.5  9.11111</div>
<div class="line">            bottom radii = 3.0  9.11111</div>
<div class="line">            media        = AIR700ICRU W700ICRU</div>
<div class="line">        :stop layer:</div>
</div><!-- fragment --> etc., until we reach the layer for the mirror. At this point we simply define it as an air cylinder but will later inscribe two planes into this region to create the mirror when defining the CD-geometry <div class="fragment"><div class="line">        :start layer:</div>
<div class="line">            thickness    = 2</div>
<div class="line">            bottom radii = 9.11111</div>
<div class="line">            media        = AIR700ICRU</div>
<div class="line">        :stop layer:</div>
</div><!-- fragment --> In a similar fashion we define placeholder layers for the x- and y-jaws. After finishing the cone stack definition, we define the mirror planes: <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library = egs_planes</div>
<div class="line">        type    = <a class="code" href="classEGS__PlanesT.html">EGS_Planes</a></div>
<div class="line">        name    = mirror_planes</div>
<div class="line">        normal  =  0.316227766017 0 0.948683298051</div>
<div class="line">        #positions = -100 20.8709325571 20.8710325571 20.8775325571 120</div>
<div class="line"><span class="preprocessor">        #</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #    Let&#39;s use a single, slightly ticker layer for better</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #    visibility</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #</span></div>
<div class="line"><span class="preprocessor"></span>        positions = -100 20.8 21 120</div>
<div class="line">        :start media input:</div>
<div class="line">            media = AIR700ICRU AL700ICRU PMMA700ICRU</div>
<div class="line">            set medium = 1 1</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> We use a set of 4 parallel planes that defines 3 regions. We make the left and right regions very large but after inscribing this geometry into the placeholder region of the cone stack within a CD-geometry, the air left and right of the mirror will be restricted to the radius of the placeholder region. Note that the mirror is made much ticker for better visibility, the actual thickness is defined in the commented out <code>positions</code> key.</p>
<p>The jaws can be modeled as a <a class="el" href="classEGS__PlaneCollection.html">plane collection</a>. We use 4 planes to define the 3 regions (left jaw, air, right jaw). As with the mirror, we make the left and right regions very large but they will be restricted to the proper size by the radius of the placeholder cone stack layer when inscribed into it. Here is the definition of the x-jaws: <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library = egs_planes</div>
<div class="line">        type    = <a class="code" href="classEGS__PlaneCollection.html">EGS_PlaneCollection</a></div>
<div class="line">        name    = x_jaws</div>
<div class="line">        normals = 1,0,0    0.99875,0,0.049938,  0.99875,0,-0.049938, 1,0,0</div>
<div class="line">        positions = -50  0  0   50</div>
<div class="line">        :start media input:</div>
<div class="line">            media = W700ICRU AIR700ICRU</div>
<div class="line">            set medium = 0 2 0</div>
<div class="line">            set medium = 1 1</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> The definition of the y-jaws is very similar and not shown.</p>
<p>The final linac geometry is a CD-Geometry with the cone stack as a base and the mirror, x-jaws and y-jaws geometries inscribed into the appropriate regions: <div class="fragment"><div class="line">    :start geometry:</div>
<div class="line">        library = egs_cdgeometry</div>
<div class="line">        name    = final_linac</div>
<div class="line">        base geometry = linac</div>
<div class="line">        set geometry = 27 mirror_planes   # define the mirror</div>
<div class="line">        set geometry = 33 x_jaws          # define the x-jaws</div>
<div class="line">        set geometry = 39 y_jaws          # define the y-jaws</div>
<div class="line">    :stop geometry:</div>
</div><!-- fragment --> The <img class="formulaInl" alt="$i$" src="form_0.png"/>'th region in the <img class="formulaInl" alt="$j$" src="form_11.png"/>'th layer of a cone stack has a region index <img class="formulaInl" alt="$i + j n_{\rm max}$" src="form_12.png"/>, where <img class="formulaInl" alt="$n_{\rm max}$" src="form_13.png"/> is the maximum number of regions from all layers in the cone stack. In our example the maximum number of regions in any layer is 3 (see <em>e.g</em>. layer 4 of the complete definition below). The mirror is inscribed into the 9'th cone stack layer, which consists of a single region and therefore the region index to inscribe the mirror is 27. In the same way the x-jaws are inscribed into the 11'th layer and the j-jaws into the 13'th and therefore the corresponding region indeces are 33 and 39.</p>
<p>This is a view of this linac geometry after the air has been made completely transparent. </p>
<div class="image">
<img src="linac_s1.png" alt="linac_s1.png"/>
</div>
<p> One can of course zoom-in and use clipping planes to better view just portions of the geometry as shown in this close-up of the flattening filter </p>
<div class="image">
<img src="linac_s2.png" alt="linac_s2.png"/>
</div>
<p>The complete definitions is here: </p>
<div class="fragment"><div class="line"></div>
<div class="line"><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc egs++ sample linear accelerator treatment head geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Copyright (C) 2015 National Research Council Canada</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  This file is part of EGSnrc.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc is free software: you can redistribute it and/or modify it under</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  the terms of the GNU Affero General Public License as published by the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Free Software Foundation, either version 3 of the License, or (at your</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  option) any later version.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  EGSnrc is distributed in the hope that it will be useful, but WITHOUT ANY</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License for</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  more details.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  You should have received a copy of the GNU Affero General Public License</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  along with EGSnrc. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Author:          Iwan Kawrakow, 2005</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Contributors:</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  An example geometry input file for the egs++ geometry package.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  This input file defines an egs++ geometry for the treatment head of a</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  medical linear accelerator in photon mode. It is based on the EX16MVp</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  example geometry that is included in BEAMnrc (except that the monitor</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  chamber is not modeled for the sake of simplicity).</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  The accelerator is modeled as a CD geometry (EGS_CDGeometry) where the</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  mirror and the two pairs of jaws are put into the appropriate regions of</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  the base linac geometry, which is a cone stack (EGS_ConeStack). The cone</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  stack defines most of the accelerator geometry (bremsstrahlung target,</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  primary collimator and flattening filter) and provides placeholder regions</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  for the mirror and the two pairs of jaws.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">###############################################################################</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"></div>
<div class="line">:start geometry definition:</div>
<div class="line"></div>
<div class="line">    :start geometry:</div>
<div class="line"></div>
<div class="line">        library = egs_cones      # <span class="keyword">this</span> is the geometry library</div>
<div class="line">        type    = <a class="code" href="classEGS__ConeStack.html">EGS_ConeStack</a>  # <span class="keyword">this</span> is the <span class="keywordtype">object</span> type that we need</div>
<div class="line"><span class="preprocessor">                                 # from the geometry library egs_cones</span></div>
<div class="line"><span class="preprocessor"></span>        axis    = 0 0 0   0 0 1  # we use the z-axis as the axis of</div>
<div class="line"><span class="preprocessor">                                 # the cone stack</span></div>
<div class="line"><span class="preprocessor"></span>        name    = linac          # and give it the very original name <span class="stringliteral">&#39;linac&#39;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        ######################### the target</span></div>
<div class="line"><span class="preprocessor"></span>        :start layer:</div>
<div class="line">            thickness    = 0.5</div>
<div class="line">            top radii    = 2.5  9.11111</div>
<div class="line">            bottom radii = 2.5  9.11111</div>
<div class="line">            media        = W700ICRU AIR700ICRU</div>
<div class="line">        :stop layer:</div>
<div class="line"><span class="preprocessor">        #  ends at z = 0.5   regions 0...2</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">        ######################### air between target and primary collimator</span></div>
<div class="line"><span class="preprocessor"></span>        :start layer:</div>
<div class="line">            thickness    = 0.4</div>
<div class="line">            bottom radii = 2.5  9.11111</div>
<div class="line">            media        = AIR700ICRU AIR700ICRU</div>
<div class="line">        :stop layer:</div>
<div class="line"><span class="preprocessor">        #  ends at z = 0.9   regions 3...5</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">        ######################### the primary collimator</span></div>
<div class="line"><span class="preprocessor"></span>        :start layer:</div>
<div class="line">            thickness    = 5</div>
<div class="line">            top radii    = 0.5  9.11111</div>
<div class="line">            bottom radii = 3.0  9.11111</div>
<div class="line">            media        = AIR700ICRU W700ICRU</div>
<div class="line">        :stop layer:</div>
<div class="line"><span class="preprocessor">        #  ends at z = 5.9   regions 6...8</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">        ######################### air between primary collimator and</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #                         flattening filter</span></div>
<div class="line"><span class="preprocessor"></span>        :start layer:</div>
<div class="line">            thickness    = 2.1</div>
<div class="line">            top radii    = 9.11111</div>
<div class="line">            bottom radii = 9.11111</div>
<div class="line">            media        = AIR700ICRU</div>
<div class="line">        :stop layer:</div>
<div class="line"><span class="preprocessor">        #  ends at z = 8   regions 9...11</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">        ######################## start of flattening filter (ff)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #----------------------- layer 1</span></div>
<div class="line"><span class="preprocessor"></span>        :start layer:</div>
<div class="line">            thickness    = 0.3</div>
<div class="line">            top radii    = 0    9.11111</div>
<div class="line">            bottom radii = 0.5  9.11111</div>
<div class="line">            media        = FE700ICRU AIR700ICRU</div>
<div class="line">        :stop layer:</div>
<div class="line"><span class="preprocessor">        #  ends at z = 8.3   regions 12...14</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #----------------------- layer 2</span></div>
<div class="line"><span class="preprocessor"></span>        :start layer:</div>
<div class="line">            thickness    = 0.7</div>
<div class="line">            bottom radii = 0.8  9.11111</div>
<div class="line">            media        = FE700ICRU AIR700ICRU</div>
<div class="line">        :stop layer:</div>
<div class="line"><span class="preprocessor">        #  ends at z = 9.0   regions 15...17</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #----------------------- layer 3</span></div>
<div class="line"><span class="preprocessor"></span>        :start layer:</div>
<div class="line">            thickness    = 1.0</div>
<div class="line">            top radii    = 0    0.8  9.11111</div>
<div class="line">            bottom radii = 0.4  1.7  9.11111</div>
<div class="line">            media        = W700ICRU FE700ICRU AIR700ICRU</div>
<div class="line">        :stop layer:</div>
<div class="line"><span class="preprocessor">        #  ends at z = 9.11111   regions 18...20</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #----------------------- layer 4</span></div>
<div class="line"><span class="preprocessor"></span>        :start layer:</div>
<div class="line">            thickness    = 1.2</div>
<div class="line">            bottom radii = 1.2  3.0  9.11111</div>
<div class="line">            media        = W700ICRU FE700ICRU AIR700ICRU</div>
<div class="line">        :stop layer:</div>
<div class="line"><span class="preprocessor">        #  ends at z = 11.2   regions 21...23</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        ############################ end of flattening filter</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">        ##################### we skip the monitor chamber</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #                     (too lazy to input so many layers)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        ##################### air between ff and mirror</span></div>
<div class="line"><span class="preprocessor"></span>        :start layer:</div>
<div class="line">            thickness    = 9.8</div>
<div class="line">            top radii    = 9.11111</div>
<div class="line">            bottom radii = 9.11111</div>
<div class="line">            media        = AIR700ICRU</div>
<div class="line">        :stop layer:</div>
<div class="line"><span class="preprocessor">        #  ends at z = 21.0   regions 24...26</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        ##################### placeholder for the mirror</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #                     it is left empty for now, it will be</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #                     divided into regions later on</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #                     when this geometry becomes the base geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #                     of a CD geometry used to model the final linac</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #</span></div>
<div class="line"><span class="preprocessor"></span>        :start layer:</div>
<div class="line">            thickness    = 2</div>
<div class="line">            bottom radii = 9.11111</div>
<div class="line">            media        = AIR700ICRU</div>
<div class="line">        :stop layer:</div>
<div class="line"><span class="preprocessor">        #  ends at z = 23.0   regions 27...29</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">        ##################### air between mirror and jaws</span></div>
<div class="line"><span class="preprocessor"></span>        :start layer:</div>
<div class="line">            thickness    = 6</div>
<div class="line">            bottom radii = 9.11111</div>
<div class="line">            media        = AIR700ICRU</div>
<div class="line">        :stop layer:</div>
<div class="line"><span class="preprocessor">        #  ends at z = 29.0   regions 30...32</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">        ##################### placeholder for the x-jaws</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #                     same comments as for the mirror layer.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #</span></div>
<div class="line"><span class="preprocessor"></span>        :start layer:</div>
<div class="line">            thickness    = 9</div>
<div class="line">            bottom radii = 9.11111</div>
<div class="line">            media        = W700ICRU</div>
<div class="line">        :stop layer:</div>
<div class="line"><span class="preprocessor">        #  ends at z = 38.0   regions 33...35</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">        ##################### air between x- and y-jaws</span></div>
<div class="line"><span class="preprocessor"></span>        :start layer:</div>
<div class="line">            thickness    = 0.5</div>
<div class="line">            bottom radii = 9.11111</div>
<div class="line">            media        = AIR700ICRU</div>
<div class="line">        :stop layer:</div>
<div class="line"><span class="preprocessor">        #  ends at z = 38.5   regions 36...38</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">        ##################### placeholder for the y-jaws</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #                     same comments as for the mirror layer.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #</span></div>
<div class="line"><span class="preprocessor"></span>        :start layer:</div>
<div class="line">            thickness    = 9</div>
<div class="line">            bottom radii = 9.11111</div>
<div class="line">            media        = W700ICRU</div>
<div class="line">        :stop layer:</div>
<div class="line"><span class="preprocessor">        #  ends at z = 47.5   regions 39...41</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    :stop geometry:</div>
<div class="line"><span class="preprocessor">    ################################### end of the cone stack named &#39;linac&#39;</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">    ################################### the mirror planes</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                   we make them extend to infinity</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                   but they will be cut to the desired</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                                   size when put into the linac</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_planes</div>
<div class="line">        type    = <a class="code" href="classEGS__PlanesT.html">EGS_Planes</a></div>
<div class="line">        name    = mirror_planes</div>
<div class="line">        normal  =  0.316227766017 0 0.948683298051</div>
<div class="line">        #positions = -100 20.8709325571 20.8710325571 20.8775325571 120</div>
<div class="line"><span class="preprocessor">        #</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #    Let&#39;s use a single, slightly ticker layer for better</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #    visibility</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">        #</span></div>
<div class="line"><span class="preprocessor"></span>        positions = -100 20.8 21 120</div>
<div class="line">        :start media input:</div>
<div class="line">            media = AIR700ICRU AL700ICRU PMMA700ICRU</div>
<div class="line">            set medium = 1 1</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ################################### the x-jaws planes</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                 We use a plane collection which will be cut</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                 to the proper size in the z-direction when</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                 put into the x-jaws placeholder in the linac geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                 We make the left- and right-most regions very large</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                 These regions will be cut by the bounding cylinder of</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                 the base linac geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_planes</div>
<div class="line">        type    = <a class="code" href="classEGS__PlaneCollection.html">EGS_PlaneCollection</a></div>
<div class="line">        name    = x_jaws</div>
<div class="line">        normals = 1,0,0    0.99875,0,0.049938,  0.99875,0,-0.049938, 1,0,0</div>
<div class="line">        positions = -50  0  0   50</div>
<div class="line">        :start media input:</div>
<div class="line">            media = W700ICRU AIR700ICRU</div>
<div class="line">            set medium = 0 2 0</div>
<div class="line">            set medium = 1 1</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ################################### the y-jaws planes</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                 We use a plane collection which will be cut</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                 to the proper size in the z-direction when</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                 put into the x-jaws placeholder in the linac geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                 We make the left- and right-most regions very large</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                 These regions will be cut by the bounding cylinder of</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #                 the base linac geometry</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">    #</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_planes</div>
<div class="line">        type    = <a class="code" href="classEGS__PlaneCollection.html">EGS_PlaneCollection</a></div>
<div class="line">        name    = y_jaws</div>
<div class="line">        normals = 0,1,0    0,0.99875,0.049938,  0,0.99875,-0.049938, 0,1,0</div>
<div class="line">        positions = -50  0  0   50</div>
<div class="line">        :start media input:</div>
<div class="line">            media = W700ICRU AIR700ICRU</div>
<div class="line">            set medium = 0 2 0</div>
<div class="line">            set medium = 1 1</div>
<div class="line">        :stop media input:</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    ################################## the final accelerator</span></div>
<div class="line"><span class="preprocessor"></span>    :start geometry:</div>
<div class="line">        library = egs_cdgeometry</div>
<div class="line">        name    = final_linac</div>
<div class="line">        base geometry = linac</div>
<div class="line">        set geometry = 27 mirror_planes   # define the mirror</div>
<div class="line">        set geometry = 33 x_jaws          # define the x-jaws</div>
<div class="line">        set geometry = 39 y_jaws          # define the y-jaws</div>
<div class="line">    :stop geometry:</div>
<div class="line"></div>
<div class="line">    simulation geometry = final_linac</div>
<div class="line"><span class="preprocessor">    #simulation geometry = linac</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">:stop geometry definition:</div>
</div><!-- fragment --> </div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
